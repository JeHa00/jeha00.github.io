<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Docker study: Docker-composeë¡œ nginx, django, postgreSQLì„ ì—°ê²°í•˜ê³  ë°°í¬í•˜ê¸° | Jeha00 DevLog</title><meta name=keywords content="docker"><meta name=description content="dockerë§Œì„ ì‚¬ìš©í•˜ì—¬ djangoë¥¼ ë°°í¬í•œ í›„, Dockerfileì„ nginxì™€ djang application ì— ëŒ€í•´ ê°ê° ë§Œë“¤ì–´ì„œ docker composeë¡œ ì—¬ëŸ¬ ì»¨í…Œì´ë„ˆë¥¼ ì—°ê²°í•˜ì—¬ ë°°í¬í•˜ëŠ” ê²ƒì„ í•™ìŠµí•´ë³¸ë‹¤."><meta name=author content="Jeha00"><link rel=canonical href=http://jeha00.github.io/post/docker/04_deployment-by-docker/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.min.1e44d58192cbf6d7a4eb649bc43dbc3d4cc432677e5d8adc69b08c34cbe461ac.css integrity="sha256-HkTVgZLL9tek62SbxD28PUzEMmd+XYrcabCMNMvkYaw=" rel="preload stylesheet" as=style><link rel=icon href=http://jeha00.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=http://jeha00.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=http://jeha00.github.io/favicon-32x32.png><link rel=apple-touch-icon href=http://jeha00.github.io/apple-touch-icon.png><link rel=mask-icon href=http://jeha00.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.101.0"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="Docker study: Docker-composeë¡œ nginx, django, postgreSQLì„ ì—°ê²°í•˜ê³  ë°°í¬í•˜ê¸°"><meta property="og:description" content="dockerë§Œì„ ì‚¬ìš©í•˜ì—¬ djangoë¥¼ ë°°í¬í•œ í›„, Dockerfileì„ nginxì™€ djang application ì— ëŒ€í•´ ê°ê° ë§Œë“¤ì–´ì„œ docker composeë¡œ ì—¬ëŸ¬ ì»¨í…Œì´ë„ˆë¥¼ ì—°ê²°í•˜ì—¬ ë°°í¬í•˜ëŠ” ê²ƒì„ í•™ìŠµí•´ë³¸ë‹¤."><meta property="og:type" content="article"><meta property="og:url" content="http://jeha00.github.io/post/docker/04_deployment-by-docker/"><meta property="og:image" content="http://jeha00.github.io/47"><meta property="article:section" content="post"><meta property="article:published_time" content="2022-12-08T13:42:28+09:00"><meta property="article:modified_time" content="2022-12-08T13:42:28+09:00"><meta property="og:site_name" content="JeHa00 DevLog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://jeha00.github.io/47"><meta name=twitter:title content="Docker study: Docker-composeë¡œ nginx, django, postgreSQLì„ ì—°ê²°í•˜ê³  ë°°í¬í•˜ê¸°"><meta name=twitter:description content="dockerë§Œì„ ì‚¬ìš©í•˜ì—¬ djangoë¥¼ ë°°í¬í•œ í›„, Dockerfileì„ nginxì™€ djang application ì— ëŒ€í•´ ê°ê° ë§Œë“¤ì–´ì„œ docker composeë¡œ ì—¬ëŸ¬ ì»¨í…Œì´ë„ˆë¥¼ ì—°ê²°í•˜ì—¬ ë°°í¬í•˜ëŠ” ê²ƒì„ í•™ìŠµí•´ë³¸ë‹¤."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"http://jeha00.github.io/post/"},{"@type":"ListItem","position":2,"name":"Docker study: Docker-composeë¡œ nginx, django, postgreSQLì„ ì—°ê²°í•˜ê³  ë°°í¬í•˜ê¸°","item":"http://jeha00.github.io/post/docker/04_deployment-by-docker/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Docker study: Docker-composeë¡œ nginx, django, postgreSQLì„ ì—°ê²°í•˜ê³  ë°°í¬í•˜ê¸°","name":"Docker study: Docker-composeë¡œ nginx, django, postgreSQLì„ ì—°ê²°í•˜ê³  ë°°í¬í•˜ê¸°","description":"dockerë§Œì„ ì‚¬ìš©í•˜ì—¬ djangoë¥¼ ë°°í¬í•œ í›„, Dockerfileì„ nginxì™€ djang application ì— ëŒ€í•´ ê°ê° ë§Œë“¤ì–´ì„œ docker composeë¡œ ì—¬ëŸ¬ ì»¨í…Œì´ë„ˆë¥¼ ì—°ê²°í•˜ì—¬ ë°°í¬í•˜ëŠ” ê²ƒì„ í•™ìŠµí•´ë³¸ë‹¤.","keywords":["docker"],"articleBody":"0. Introduction í•´ë‹¹ ê°•ì˜ëŠ” ëŸ¬ë‹ìŠ¤í‘¼ì¦ˆ - ë‚˜ë…¸ë””ê·¸ë¦¬ Python \u0026 Django backed courseì˜ ì¥ì² ì› ê°•ì‚¬ë‹˜ì˜ docker ê°•ì˜ë¥¼ í•™ìŠµí•œ ë‚´ìš©ì…ë‹ˆë‹¤.\nì¸ìŠ¤í„´ìŠ¤ëŠ” ìš°ë¶„íˆ¬ë¥¼ ì‚¬ìš©í•œë‹¤.\n1. PostgreSQL ì»¨í…Œì´ë„ˆë¡œ ë°°í¬í•˜ê¸° DB ê´€ë¦¬ dbë¥¼ ì»¨í…Œì´ë„ˆì— ë„ì–´ì„œ ê´€ë¦¬í•˜ëŠ”ê°€, ì•„ë‹ˆë©´ ìŒ© ì„œë²„ì— ê´€ë¦¬í•˜ëŠ”ê°€ ëŠ” í˜¸ë¶ˆí˜¸ê°€ ê°ˆë¦°ë‹¤.\nì™œëƒí•˜ë©´ ì»¨í…Œì´ë„ˆì˜ ê¸°ë³¸ì´ ì§€ì›Œì ¸ë„ ìƒê´€ì—†ë‹¤ëŠ” ì „ì œì´ê¸° ë•Œë¬¸ì—, dbëŠ” ì§€ì›Œì§€ë©´ ì•ˆë˜ê¸° ë•Œë¬¸ì— ì»¨í…Œì´ë„ˆì— ì‚¬ìš©ë˜ì§€ ì•ŠëŠ”ë‹¤.\nì»¨í…Œì´ë„ˆ ë‚´ë¶€ ì ‘ì†í•˜ê¸° ì»¨í…Œì´ë„ˆ ë‚´ë¶€ë¡œ ë“¤ì–´ê°€ê¸°: docker exec -it /bin/bash\nê·¸ë˜ì„œ ì´ ë‚´ë¶€ì—ì„œ ëª…ë ¹ì–´ë¥¼ ì˜ëª» ì…ë ¥í•˜ë©´ ì»¨í…Œì´ë„ˆì—ì„œ ë‚˜ê°”ë‹¤ê°€ Killí•˜ë©´ ëœë‹¤. superuserë¡œ ë¡œê·¸ì¸í•˜ê¸°: psql -U postgres ë¥¼ ì˜ë¯¸í•œë‹¤.\n\\dt: í…Œì´ë¸” ì¡°íšŒ\npostgresql ì¢…ë£Œ ëª…ë ¹ì–´: \\q\nDockerfileì´ë€? ë„ì»¤ ì´ë¯¸ì§€ì— ëŒ€í•œ ì •ë³´ë¥¼ ê¸°ìˆ í•œ í…œí”Œë¦¿ íŒ¨í‚¤ì§€, ëª…ë ¹ì–´, í™˜ê²½ ë³€ìˆ˜ ì„¤ì •ë“±ì„ ê¸°ë¡ ë„ì»¤ íŒŒì¼ì„ í†µí•´ postgreSQL container ë„ìš°ê¸° PostgreSQLì— ëŒ€í•œ Dockerfileì„ ë‹´ì„ directoryë¥¼ ìƒì„±í•œë‹¤.\ní•´ë‹¹ ê²½ë¡œì— vim Dockerfileë¥¼ ì‹¤í–‰í•˜ì—¬ FROM postgresë¥¼ ì…ë ¥í•œë‹¤.\n2. ë„ì»¤ ë³¼ë¥¨(docker volume) ë„ì»¤ ë³¼ë¥¨ì´ë€? ë„ì»¤ ì»¨í…Œì´ë„ˆì— ìˆëŠ” ë°ì´í„°ë¥¼ ë³´ê´€í•˜ê¸° ìœ„í•´ì„œ ì‚¬ìš©í•˜ëŠ” íˆ´\në„ì»¤ ë³¼ë¥¨ì„ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì—ëŠ” 2ê°€ì§€ ë°©ì‹ì´ ìˆë‹¤.\nEC2 ì„œë²„ ë‚´ë¶€ì˜ file system ê²½ë¡œì— ì—°ê²°í•˜ëŠ” ê²ƒ volumeì— ì—°ê²°í•˜ëŠ” ê²ƒ ìœ„ ë°©ì‹ë“¤ì„ ì‚¬ìš©í•˜ë©´ file systemê³¼ ê³„ì†í•´ì„œ ì—°ê²°ë˜ì–´ ìˆê¸° ë•Œë¬¸ì—, DBê°€ êº¼ì ¸ë„ file systemê¹Œì§€ ë‹¤ ì €ì¥ë˜ì–´ ìˆì–´ì„œ ë°ì´í„°ë¥¼ ë³´ì¡´í•  ìˆ˜ ìˆë‹¤.\në„ì»¤ì—ì„œëŠ” ë³¼ë¥¨ì„ ìƒì„±í•˜ì—¬ ì‚¬ìš©í•˜ê¸°ë¥¼ ì¶”ì²œí•œë‹¤.\n2.1 ë¡œì»¬ ê²½ë¡œë¡œ ì—°ê²° ì´ ë°©ì‹ì˜ ë¬¸ì œì  : í•„ìš”í•œ ê²½ë¡œë¼ ìƒê°í•˜ì—¬ ì‚¬ìš©ìê°€ ë¬´ì‹¬ì½” ê²½ë¡œë¥¼ ì‚­ì œí•  ìˆ˜ ìˆë‹¤. ì—°ê²°í•  í˜¸ìŠ¤íŠ¸ ê²½ë¡œ í™•ì¸ docker run -e POSTGRES_PASSWORD=mysecretpassword -v ~/test:/test:rw -d postgres\n-v: volumeì„ ì˜ë¯¸\nlocal ìƒì˜ ~/work/testì™€ container ìƒì˜ ~/work/testë¥¼ ì—°ê²°\nrw: readì™€ write ê¶Œí•œì„ ì£¼ê² ë‹¤ëŠ” ê±¸ ì˜ë¯¸\n-d: backgroundìœ¼ë¡œ ì‘ë™í•œë‹¤ëŠ” ê±¸ ì˜ë¯¸\ncontainer lsë¡œ í™•ì¸ í›„, ì ‘ì†í•˜ê¸° docker container ls docker exec -it /bin/bash ì ‘ì†í•˜ë©´ /testê°€ ìˆëŠ” ê±¸ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ê·¸ëŸ¬ë©´ /test ê²½ë¡œë¡œ ì´ë™í•œë‹¤(cd test). lsë¡œ í™•ì¸í•˜ë©´ postgresqlì— ì ‘ì†í•˜ê¸° ì „ê³¼ ë™ì¼í•˜ë‹¤ëŠ” ê±¸ ì•Œ ìˆ˜ ìˆë‹¤. ì ‘ì†í•œ containerì—ì„œ ìƒì„± í›„, docker hostì—ì„œë„ í™•ì¸í•˜ê¸° mkdir inside í›„, exití•˜ì—¬ ë‚˜ì˜¨ë‹¤.\në™ì¼í•œ ê²½ë¡œë¡œ ì´ë™í•˜ì—¬ lsë¡œ í™•ì¸í•˜ë©´ inside directoryê°€ ìˆëŠ” ê±¸ ì•Œ ìˆ˜ ìˆë‹¤.\nìƒì„±í•œ directoryë¥¼ docker hostì—ì„œ ì‚­ì œí•œ í›„, containerì— ì ‘ì†í•˜ì—¬ í™•ì¸í•˜ë©´ ë˜‘ê°™ì´ ì‚­ì œëœ ê±¸ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\n2.2 ë„ì»¤ ë³¼ë¥¨ìœ¼ë¡œ ì—°ê²°í•˜ê¸° ìƒì„± í›„, ë‚´ìš© í™•ì¸í•˜ê¸° ì²« ë²ˆì§¸, ëª…ë ¹ì–´ docker volume create \u003cë³¼ë¥¨ëª…\u003eì„ ì‚¬ìš©í•˜ì—¬ ë³¼ë¥¨ì„ ec2 ë‚´ì—ì„œ ìƒì„±í•œë‹¤.\nìƒì„± í›„, ë³¼ë¥¨ ëª©ë¡ì„ í™•ì¸í•˜ê³  ì‹¶ìœ¼ë©´ docker volume lsë¥¼ ì…ë ¥í•œë‹¤.\nìƒì„±í•œ ë³¼ë¥¨ì— ëŒ€í•œ ì •ë³´ë¥¼ í™•ì¸í•˜ê³  ì‹¶ìœ¼ë©´ docker volume inspect \u003cìƒì„±í•œ ë³¼ë¥¨ëª…\u003eì„ ì…ë ¥í•œë‹¤.\ní™•ì¸ëœ ì •ë³´ë“¤ì—ì„œ MountpointëŠ” ìƒì„±í•œ ë³¼ë¥¨ì˜ ê²½ë¡œë¥¼ ì˜ë¯¸í•œë‹¤. docker hostì˜ ê²½ë¡œì™€ ì—°ê²°í•˜ê¸° docker run -e POSTGRES_PASSWORD=mysecretpassword -v myvolume:/var/lib/postgresql/data -d postgres\nmyvolumeì„ postgresqlì˜ ë°ì´í„° ê²½ë¡œì™€ ì—°ê²°í•œë‹¤.\nâ—ï¸/var/lib/postgresql/data ëŠ” ë‚´ê°€ ì„ì˜ë¡œ ì •í•˜ëŠ” ê²Œ ì•„ë‹Œ RDBMSë§ˆë‹¤ ì •í•´ì ¸ìˆìœ¼ë¯€ë¡œ ë‹¤ë¥¸ ê²ƒì„ ì‚¬ìš©í•œë‹¤ë©´ ì¶”ê°€ë¡œ í™•ì¸í•´ì•¼í•œë‹¤.\npostgresql ë°ì´í„° ìƒì„±, ì»¨í…Œì´ë„ˆ ì‚­ì œ í›„ ì‹¤í–‰í•˜ì—¬ ë°ì´í„° í™•ì¸í•˜ê¸° container ì ‘ì†: docker exec -it postgresql ì ‘ì†: psql -U postgres ì‚¬ìš©ì ì¶”ê°€: CREATE USER jeha PASSWORD '1234' SUPERUSER; \\du: ëª¨ë“  ì‚¬ìš©ì ë³´ì—¬ì£¼ê¸° \\q: ë‚˜ì˜¤ê¸° container ì¤‘ë‹¨: docker container stop container ì‚­ì œ: docker container rm ë‹¤ì‹œ postgresql ì‹¤í–‰í•˜ì—¬ ì ‘ì†í•œë‹¤. \\duë¡œ ë“±ë¡ëœ ì‚¬ìš©ìê°€ ì•„ì§ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸ í›„, exit 3. Dockerë¡œ django ë°°í¬í•˜ê¸° 3.1 Django image pull ë°›ê³  í™•ì¸í•˜ê¸° django image pull ë°›ê¸°: docker pull django django pull í•œ image í™•ì¸: docker image ls 3.2 ì¥ê³  ì»¨í…Œì´ë„ˆ ê°€ë™ ë°°í¬ì‹œìŠ¤í…œ êµ¬ì¡° ì´í•´í•˜ê¸° ì„œë²„ í¬íŠ¸ì™€ ì»¨í…Œì´ë„ˆ í¬íŠ¸ ì—°ê²°í•˜ê¸°\níŠ¸ë˜í”½ì€ ë°”ë¡œ ë“¤ì–´ì˜¤ëŠ” ê²Œ ì•„ë‹Œ, ì„œë²„ë¥¼ ê±°ì³ì„œ ì»¨í…Œì´ë„ˆë¡œ ë“¤ì–´ì˜¨ë‹¤. ì´ 2ë‹¨ê³„ê°€ í•„ìš”í•˜ë‹¤.\nìš°ë¦¬ê°€ ë¸Œë¼ìš°ì €ì˜ url ì°½ì— ë„ë©”ì¸ì„ ì…ë ¥í•˜ê³  ë‚˜ì„œ ì…ë ¥í•˜ëŠ” í¬íŠ¸ ë²ˆí˜¸ëŠ” ì»¨í…Œì´ë„ˆì˜ í¬íŠ¸ ë²ˆí˜¸ê°€ ì•„ë‹ˆë¼ â€˜ì„œë²„ì˜ í¬íŠ¸ ë²ˆí˜¸â€™ë¥¼ ë§í•œë‹¤.\nPort ë²ˆí˜¸\në‚´ê°€ ì‚¬ìš©í•˜ëŠ” í”„ë ˆì„ì›Œí¬ëŠ” django ì´ë¯€ë¡œ, port ë²ˆí˜¸ëŠ” 8000ì„ ì‚¬ìš©í•˜ê¸°ë¡œ í•œë‹¤. HTTP portëŠ” 80ìœ¼ë¡œ ì •í•´ì ¸ìˆë‹¤. www.naver.com ì„ ì…ë ¥í•˜ëŠ” ê²ƒì€ www.naver.com/:80 ì„ ì…ë ¥í•˜ëŠ” ê²ƒê³¼ ë™ì¼í•˜ë‹¤. ê·¸ë˜ì„œ 80 portë¥¼ ì§€ë‚œ í›„, 8000 portë¡œ ì˜¤ë„ë¡ ì—°ê²°í•´ì•¼ í•œë‹¤. ì´ë¥¼ ì„¤ê³„í•˜ì§€ ì•Šìœ¼ë©´ ì»¨í…Œì´ë„ˆë¥¼ ë„ì–´ë„ ì™¸ë¶€ì—ì„œ ì ‘ì†í•  ìˆ˜ ì—†ë‹¤.\nì¥ê³  ì»¨í…Œì´ë„ˆ ê°€ë™í•˜ê¸° docker run -d -p 80:8000 django bash -c â€œpip install django \u0026\u0026 django-admin startproject \u0026\u0026 cd \u0026\u0026 python manage.py runserver 0.0.0.0:8000â€\n-d: ë„ì»¤ ì»¨í…Œì´ë„ˆì˜ ë°±ê·¸ë¼ìš´ë“œ ì‹¤í–‰\n-p 80:8000: ì»¨í…Œì´ë„ˆ í¬íŠ¸ ì„¤ì • - í˜¸ìŠ¤íŠ¸ í¬íŠ¸: ì»¨í…Œì´ë„ˆ í¬íŠ¸\në‘ í¬íŠ¸ë¥¼ ì—°ê²°í•˜ê² ë‹¤ëŠ” ì˜ë¯¸ bash: ì»¨í…Œì´ë„ˆ ì‹¤í–‰ í›„, bash ì‹¤í–‰\nbashì— \"\" ì•ˆ ë‚´ìš©ì„ ì‹¤í–‰í•œë‹¤. bashë¥¼ ì‚¬ìš©í•´ì„œ ì¥ê³  í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•œë‹¤. \u0026\u0026: ì—°ê²°ì§€ì–´ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰í•œë‹¤.\npython manage.py runserver 0.0.0.0:8000 ì—ì„œ ìœ„ì— -p ì˜µì…˜ìœ¼ë¡œ ì…ë ¥í•  í¬íŠ¸ë²ˆí˜¸ì™€ ì¼ì¹˜ì‹œì¼œì•¼ í•œë‹¤.\në§Œì•½ í•´ë‹¹ í¬íŠ¸ê°€ ì´ë¯¸ ì‚¬ìš© ì¤‘ì´ë¼ê³  í•œë‹¤ë©´ ps -ef | grep 8000ì„ ì…ë ¥í•´ì„œ 8000ë²ˆì— ë¬´ì—‡ì´ ì‚¬ìš©ë˜ëŠ”ì§€ ì•Œ ìˆ˜ ìˆë‹¤.\nğŸ”† ì°¸ê³ ì‚¬í•­ ë§Œì•½ docker container lsë¥¼ ì…ë ¥í–ˆëŠ”ë° ì•„ë¬´ê²ƒë„ ì•ˆëœ¨ë©´ ìì„¸íˆ í™•ì¸í•˜ê¸° ìœ„í•´ì„œ docker container ls -a ë¥¼ ì…ë ¥í•˜ë©´ STATUSë¥¼ í†µí•´ í™•ì¸í•˜ë©´ Exitedë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ê·¸ëŸ¬ë©´ ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¡œê·¸ë¥¼ í™•ì¸í•´ë³´ë©´ ì—ëŸ¬ ì›ì¸ì„ ë³´ë‹¤ ìì„¸íˆ ì•Œ ìˆ˜ ìˆìœ¼ë¯€ë¡œ í™œìš©í•˜ì.\në¡œê·¸ í™•ì¸: docker logs â—ï¸Error starting userland proxy Error starting userland proxy: listen tcp4 0.0.0.0:80: bind: address already in use.\nsudo netstat -nlptu | grep 80ì„ ì…ë ¥í•´ë³´ì. ë§Œì•½ command not foundê°€ ëœ¬ë‹¤ë©´ apt-get install net-toolsë¥¼ ì…ë ¥í•˜ì—¬ ì„¤ì¹˜ í›„, ë‹¤ì‹œ ì‹¤í–‰í•´ë³´ì.\nê·¸ëŸ¬ë©´ 80 portë¥¼ ëˆ„ê°€ ì‚¬ìš© ì¤‘ì¸ì§€ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\në§Œì•½ ê·¸ í¬íŠ¸ë¥¼ ì‚¬ìš©í•˜ëŠ”ê²Œ nginx, apacheë¼ë©´ sudo systemctl stop nginx ë˜ëŠ” sudo systemctl stop apache ì„ ì…ë ¥í•˜ì—¬ ì¤‘ë‹¨í•˜ì.\nê·¸í›„ ë‹¤ì‹œ ì¥ê³  ì»¨í…Œì´ë„ˆ ê°€ë™í•˜ê¸° ìœ„í•œ ëª…ë ¹ì–´ docker run -d -p 80:8000 ...ì„ ì…ë ¥í•œë‹¤.\nnginx, apacheê°€ ì•„ë‹ˆë¼ë©´ì„œ sudo kill -9 ë¥¼ ì…ë ¥í•œë‹¤.\n3.3 docker container ì •ì§€ ë° ì¬ê°€ë™ ì •ì§€: docker container stop ì¬ê°€ë™\ndocker container ls -aë¡œ ì •ì§€í–ˆì—ˆë˜ container idë¥¼ í™•ì¸ ë©ˆì¶°ìˆëŠ” ë„ì»¤ë¥¼ ì¬ì‹œì‘í•œë‹¤ëŠ” ì˜ë¯¸ì´ë¯€ë¡œ, docker start ë¥¼ ì…ë ¥ 4. ì„œë²„ì— ì¥ê³  ì½”ë“œ ë°°í¬í•˜ê¸° 4.1 AWS ì™¸ë¶€ ì ‘ì†ì„ ìœ„í•œ í¬íŠ¸ ì„¤ì • í•´ë‹¹ EC2ì˜ ì¸ë°”ìš´ë“œ ê·œì¹™ í¸ì§‘ì— ì‚¬ìš©ì ì§€ì • TCPë¡œ â€˜8000â€™ì„ ì¶”ê°€í•œë‹¤. 4.2 ì¥ê³  í”„ë¡œì íŠ¸ ìƒì„± ë° ê°€ë™ root ê³„ì •ìœ¼ë¡œ ì´ë™: sudo -i\nworkë¡œ ì´ë™\npyenvëŠ” ì•„ë˜ ë§í¬ë¥¼ ë”°ë¼ì„œ ì§„í–‰í•˜ì—¬ ì„¤ì¹˜ ë° í™œì„±í™”í•œë‹¤.\npyenvë¥¼ í†µí•œ íŒŒì´ì¬(python) ê°€ìƒí™˜ê²½ êµ¬ì¶• ê°€ìƒí™˜ê²½ ì‹¤í–‰: pyenv activate \u003cê°€ìƒí™˜ê²½ëª…\u003e\npyenv ë§ê³ , ec2ì— ì„¤ì¹˜ëœ ê²Œ ìˆìœ¼ë©´ ê·¸ê²ƒìœ¼ë¡œ í•˜ë©´ ëœë‹¤. í”„ë¡œì íŠ¸ ëª…ì¹­: django-admin startproject \u003cí”„ë¡œì íŠ¸ ëª…\u003e\n4.3 ì¥ê³  ì„¤ì •íŒŒì¼ ìˆ˜ì • ë° ì ‘ì† í™•ì¸ settings.py ì—ì„œ ALLOWED_HOSTS ë¥¼ ['*']ë¡œ ìˆ˜ì •í•œë‹¤. ì´ê²ƒì˜ ì˜ë¯¸ëŠ” ëª¨ë“  ì™¸ë¶€ ì ‘ì†ì„ í—ˆìš©í•œë‹¤ëŠ” ì˜ë¯¸ë‹¤.\nìˆ˜ì •í•  ë•Œì—ë§Œ vimì„ ì‚¬ìš©í•˜ê³ , ê·¸ëƒ¥ ë³¼ ë•ŒëŠ” catë¥¼ ì‚¬ìš©í•œë‹¤.\npython manage.py runserver 0:8000 ë¥¼ ì…ë ¥í•´ì•¼ ec2 ip ì£¼ì†Œë¥¼ ì‚¬ìš©í•´ì„œ :8000 ë¡œ ì ‘ì†í•  ìˆ˜ ìˆë‹¤.\nâ—ï¸ ë°œìƒí•œ Error _ModuleNotFoundError: No module named â€˜_sqlite3â€™ _\nsqlite3ëŠ” íŒŒì´ì¬ ì„¤ì¹˜ ì‹œ, í¬í•¨ë˜ëŠ”ë° ìœ„ì™€ ê°™ì€ ì—ëŸ¬ëŠ” íŒŒì´ì¬ ì„¤ì¹˜ê°€ ì œëŒ€ë¡œ ì•ˆëœ ê²ƒì´ê¸° ë•Œë¬¸ì—,\npyenv install ì„ ì…ë ¥í•˜ì—¬ ì„¤ì¹˜ë¥¼ ë‹¤ì‹œ í•œë‹¤.\n5. ì§ì ‘ ì§  ì½”ë“œ containerë¡œ ë°°í¬í•˜ê¸° 5.1 ë””ë ‰í† ë¦¬ ì •ë¦¬, tree ì„¤ì¹˜í•˜ì—¬ íŒŒì¼ êµ¬ì¡° í™•ì¸í•˜ê¸° sudo apt-get install tree\nìœ„ ëª…ë ¹ì–´ ì‹¤í–‰ í›„, tree ./ë¡œ ì›í•˜ëŠ” ê²½ë¡œì˜ directiory êµ¬ì¡°ë¥¼ treeë¡œ í™•ì¸í•œë‹¤.\n5.2 requirements.txt íŒŒì¼ ìƒì„± ì´ íŒŒì¼ ì¶”ê°€í•˜ëŠ” ì´ìœ ëŠ” ë‚˜ë§Œì˜ ë„ì»¤ ì´ë¯¸ì§€ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ django 4.1.1 layerë¥¼ ìŒ“ê¸° ìœ„í•´ì„œë‹¤.\nì™œëƒí•˜ë©´ ë„ì»¤ëŠ” ì—¬ëŸ¬ Layerê°€ ìŒ“ì—¬ì§„ ê²ƒì´ê¸° ë•Œë¬¸ì´ë‹¤.\nvim requirements.txtë¥¼ ì‹¤í–‰í•˜ì—¬ ìƒì„±í•œë‹¤.\ndjango==4.1.1ë¥¼ ì¶”ê°€í•œë‹¤. 5.3 Dockerfile ìƒì„±í•˜ê¸° Dockerfile ìƒì„±í•˜ê¸° ìœ„ ì¥ê³  ê³¼ì •ì—ì„œ ì§ì ‘ í•˜ë‚˜í•˜ë‚˜ ì„¤ì¹˜í•˜ê³  ì‹¤í–‰í•œ ê±´ ë„ì»¤ ê°œë…ì„ ì´í•´í•˜ê¸° ìœ„í•´ì„œë‹¤.\nrequirements.txtë§Œ ì‹¤í–‰í•˜ë©´ ë°”ë¡œ ì„¤ì¹˜ëœë‹¤.\nFROM python:3.10.4 WORKDIR /usr/src/app COPY . . RUN python -m pip install -upgrade pip RUN pip install -r requirements.txt WORKDIR ./practice CMD python manage.py runserver 0:8000 EXPOSE 8000 ì´ ë•Œ ìƒì„±í•´ì•¼í•˜ëŠ” Dockerfile ì´ë¦„ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.\nDockerfile ì£¼ì˜ì‚¬í•­: ì²« ê¸€ìê°€ ëŒ€ë¬¸ìì´ê³ , í™•ì¥ìê°€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤. FROM: ê¸°ë³¸ layerë¥¼ ë¬´ì—‡ìœ¼ë¡œ í•  ê²ƒì¸ê°€?\npython:3.10.4: ê¸°ë³¸ Layerë¥¼ ì´ê²ƒìœ¼ë¡œ í•œë‹¤. ì²« ë²ˆì§¸ WOKDIR: rootë¶€í„° ì‹œì‘í•˜ëŠ” container ë‚´ë¶€ ê²½ë¡œë¥¼ ì˜ë¯¸í•œë‹¤.\nCOPY . .: ëª¨ë“  ê²ƒì„ ì»¨í…Œì´ë„ˆ ì•ˆìœ¼ë¡œ ê°€ì ¸ì˜¤ê² ë‹¤ëŠ” ì˜ë¯¸ë‹¤.\nRUN: ì˜¤ë¥¸ìª½ì— ì…ë ¥í•œ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ê² ë‹¤.\në‘ ë²ˆì§¸ WORKDIR: ìœ„ì— RUN ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰ í›„, ì˜¤ë¥¸ìª½ì— ì…ë ¥í•œ ê²½ë¡œë¡œ ì´ë™í•œë‹¤.\nEXPOSE: ì»¨í…Œì´ë„ˆì— í¬íŠ¸ ëª‡ ë²ˆì„ ì—´ì§€ë¥¼ ì•Œë ¤ì£¼ëŠ” ê²ƒ\nDockerfile ì˜ file level Dockerfileê³¼ requirements.txtëŠ” ë™ì¼í•œ íŒŒì¼ levelì— ìˆì–´ì•¼ í•œë‹¤.\n5.4 image build í•˜ê¸° docker build . -t \u003cë§Œë“¤ image ì´ë¦„\u003e\nDockerfileì´ ìˆëŠ” ìœ„ì¹˜ì—ì„œ ì‹¤í–‰í•œë‹¤.\n.ì€ ìœ„ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ëŠ” ê²½ë¡œ ì•ˆì— ìˆëŠ” ëª¨ë“  ê±¸ ì˜ë¯¸í•œë‹¤.\n-t: íƒœê·¸ë¥¼ ì˜ë¯¸\ndocker image lsë¥¼ ì…ë ¥í•˜ë©´ ëª©ë¡ì— ìœ„ì— ì…ë ¥í•œ image ì´ë¦„ìœ¼ë¡œ ì¡´ì¬í•˜ëŠ” ê±¸ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\nâ—ï¸ ì»¨í…Œì´ë„ˆëŠ” ìš´ì˜ì²´ì œê°€ ì•„ë‹ˆê¸° ë•Œë¬¸ì—, root User ê´€ë ¨ ê²½ê³ ëŠ” ë¬¸ì œê°€ ì•„ë‹ˆë‹¤. â—ï¸ ë§Œì•½ imageë¥¼ ë¹Œë“œ í›„, Dockerfileì„ ìˆ˜ì •í•˜ë©´ ë‹¤ì‹œ imageë¥¼ ë§Œë“¤ì–´ì•¼ í•œë‹¤.\në¹Œë“œí•œ ì´ë¯¸ì§€ ì‹¤í–‰í•˜ì—¬ ì»¨í…Œì´ë„ˆ ê°€ë™ docker run -d -p 80:8000 \u003cë§Œë“  image ì´ë¦„\u003e\nìœ„ ëª…ë ¹ì–´ ì‹¤í–‰ í›„, docker container lsë¥¼ ì…ë ¥í•˜ë©´ ê°€ë™ë˜ê³  ìˆëŠ” containerë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\nâ—ï¸ ìœ„ ëª…ë ¹ì–´ë¡œ container idê°€ ë–´ìŒì—ë„ ë¶ˆêµ¬í•˜ê³ , docker container ls -aë¡œ í•´ë‹¹ container idì˜ statusê°€ exited ì´ë©´ docker logs ë¡œ ì›ì¸ì„ íŒŒì•…í•œë‹¤.\n6. dockerë¡œ nginx ë°°í¬í•˜ê¸° djangoë§Œìœ¼ë¡œëŠ” trafficì„ ë°›ì„ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì—, nginxë¥¼ ì„¤ì¹˜í•´ì•¼í•œë‹¤.\n6.1 nginx ë””ë ‰í† ë¦¬ ìƒì„± mkdir nginxtest ìƒì„±\n6.2 Dockerfile ìƒì„± ìœ„ì— ìƒì„±í•œ ë””ë ‰í† ë¦¬ë¡œ ì´ë™ í›„, vim Dockerfileë¡œ ìƒì„±í•˜ì—¬ ì•„ë˜ ë‚´ìš©ì„ ì…ë ¥í•œë‹¤. â—ï¸ ì…ë ¥ ì‹œ, í™€ë”°ì˜´í‘œê°€ ì•„ë‹Œ ìŒë”°ì˜´í‘œë¥¼ ì‚¬ìš©í•œë‹¤.\nFROM nginx CMD [\"nginx\", \"-g\", \"daemon off;\"] daemon offì˜ ì˜ë¯¸ nginxë¥¼ foregroundë¡œ ëŒë¦¬ê¸° ìœ„í•¨ containerê°€ backgroundë¡œ ì‹¤í–‰ë˜ë¯€ë¡œ, nginxë¥¼ foregroundë¡œ ëŒë¦¬ì§€ ì•Šìœ¼ë©´ nginxê°€ exitedëœë‹¤. file level 6.3 image build ë° í™•ì¸ image build Dockerfileì´ ìˆëŠ” ê²½ë¡œì—ì„œ ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•œë‹¤.\ndocker build . -t nginx-test\nimage í™•ì¸ docker image lsë¥¼ ì‹¤í–‰í•˜ì—¬ ëª©ë¡ì„ í™•ì¸í•œë‹¤. ì´ ë•Œ ê²½ë¡œëŠ” ìƒê´€ì—†ë‹¤.\n6.4 nginx container ê°€ë™ container ê°€ë™ docker run -d nginx-test\nëª©ë¡ í™•ì¸ docker container ls\n7. Docker composeë¡œ ì¥ê³ ì™€ nginx í•¨ê»˜ ë°°í¬í•˜ê¸° ìœ„ ì´ë¯¸ì§€ì²˜ëŸ¼ ì»¨í…Œì´ë„ˆ ë‘ ê°œë¥¼ ì—°ê²°í•˜ë ¤ê³  í•œë‹¤.\nì„œë²„ ì™¸ë¶€ì—ì„œ 80í¬íŠ¸ë¡œ ë“¤ì–´ì˜¤ë©´ nginxë¡œ ì´ë™í•˜ë©´ django-test 8000 portë¡œ ì´ë™ë˜ë„ë¡ í•œë‹¤. nginx: ì„œë²„ ì™€ django: ì›¹ ì„œë²„ë¥¼ ì—°ê²°í•˜ê¸° ìœ„í•´ì„œ gunicornì„ ì‚¬ìš©í•´ë³¼ ì˜ˆì •ì´ë‹¤.\nì´ë¥¼ ìœ„í•´ì„œ docker composeë¥¼ ì‚¬ìš©í•´ë³´ì.\n7.1 Docker compose ê°œë… \u0026 ì„¤ì¹˜ Docker compose concept djangoê³¼ nginxë¥¼ ì—°ê²°í•˜ëŠ”ë°, ë§ì€ ì»¨í…Œì´ë„ˆë¥¼ í•˜ë‚˜ í•˜ë‚˜ ì§ì ‘ ì—°ê²°í•˜ëŠ” ê±´ ë§¤ìš° ì‹œê°„ì´ ë§ì´ ê±¸ë¦°ë‹¤.\në„ì»¤ íŒŒì¼ì€ â€˜í•˜ë‚˜ì˜ ì»¨í…Œì´ë„ˆâ€™ ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•œ íŒŒì¼ì´ë‹¤.\ní•˜ì§€ë§Œ, ë„ì»¤ ì»´í¬ì¦ˆëŠ” â€˜ì—¬ëŸ¬ ê°œì˜ ì»¨í…Œì´ë„ˆâ€™ë¥¼ ê´€ë¦¬í•˜ëŠ” ë„ì»¤ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ë‹¤.\në„ì»¤ ì»´í¬ì¦ˆë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” docker-compose.ymlì´ë¼ëŠ” YAML íŒŒì¼ì„ ì‚¬ìš©í•œë‹¤.\nYAML YAMLì€ ë§ˆí¬ì—… ì–¸ì–´ê°€ ì•„ë‹ˆë‹¤.\nê¸°ì¡´ JSONì˜ ë¶ˆí¸í•¨ì„ í•´ì†Œí•˜ê¸° ìœ„í•´ ë§Œë“¤ì–´ì§„ ì–¸ì–´\nì£¼ë¡œ ì„¤ì • íŒŒì¼(configuration file)ì— ì‚¬ìš©\ní™•ì¥ì: *.yml\n7.2 Docker compose installation docs.docker.com - install the plugin manuallyë¥¼ ë³´ê³  ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ì…ë ¥í•œë‹¤.\nmkdir -p ~/.docker/cli-plugins curl -SL https://github.com/docker/compose/releases/download/v2.14.0/docker-compose-linux-x86_64 -o ~/.docker/cli-plugins/docker-compose chmod +x ~/.docker/cli-plugins/docker-compose docker compose version â—ï¸ Error docker: â€˜composeâ€™ is not a docker command\ncurl -o ë’¤ì— ê²½ë¡œì™€ mkdirì˜ ê²½ë¡œê°€ ì¼ì¹˜í•œì§€ í™•ì¸í•˜ê¸°\n7.3 directory ì •ë¦¬ ë‹¤ìŒê³¼ ê°™ì´ ê²½ë¡œë¥¼ ìˆ˜ì •í•œë‹¤.\n./ â”œâ”€â”€ django â”‚Â â”œâ”€â”€ Devket â”‚Â â”‚Â â”œâ”€â”€ config â”‚Â â”‚Â â”‚Â â”œâ”€â”€ __init__.py â”‚Â â”‚Â â”‚Â â”œâ”€â”€ __pycache__ â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ __init__.cpython-310.pyc â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ settings.cpython-310.pyc â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ urls.cpython-310.pyc â”‚Â â”‚Â â”‚Â â”‚Â â””â”€â”€ wsgi.cpython-310.pyc â”‚Â â”‚Â â”‚Â â”œâ”€â”€ asgi.py â”‚Â â”‚Â â”‚Â â”œâ”€â”€ settings.py â”‚Â â”‚Â â”‚Â â”œâ”€â”€ urls.py â”‚Â â”‚Â â”‚Â â”œâ”€â”€ wsgi.py â”‚Â â”‚Â â”‚Â â””â”€â”€ ~ â”‚Â â”‚Â â”œâ”€â”€ db.sqlite3 â”‚Â â”‚Â â””â”€â”€ manage.py â”‚Â â”œâ”€â”€ Dockerfile â”‚Â â””â”€â”€ requirements.txt â””â”€â”€ nginx â””â”€â”€ Dockerfile 7.4 Dockerfile ìˆ˜ì • django directory ì•ˆì— ìˆëŠ” dockerfile ìˆ˜ì • ì²« ë²ˆì§¸ CMD ë’¤ì— ë‹¤ë¥¸ CMDë¥¼ ì¶”ê°€í•œë‹¤.\nCMD gunicorn config.wsgi:application --bind 0.0.0.0:8000\nnginx directory ì•ˆì— ìˆëŠ” dockerfile ìˆ˜ì • ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜ì •í•œë‹¤.\nFROM nginx RUN rm /etc/nginx/conf.d/default.conf COPY default.conf /etc/nginx/conf.d CMD [\"nginx\", \"-g\", \"daemon off;\"] ê¸°ì¡´ ì»¨í…Œì´ë„ˆì— ìˆë˜ default.confë¥¼ ì‚­ì œí•˜ê³ , ìƒˆë¡œìš´ default.confë¥¼ ê¸°ì¡´ì— ìˆë˜ ê²½ë¡œì— ë§Œë“¤ê² ë‹¤ëŠ” ì˜ë¯¸ë‹¤. 7.5 nginxì— default.conf ì¶”ê°€ server { listen 80; server_name localhost; location /{ proxy_pass http://:8000; } } listen 80 : ì„œë²„ë¡œë¶€í„° ë“¤ì–´ì˜¤ëŠ” ê²ƒì„ 80 portë¡œ ë°›ê² ë‹¤ëŠ” ì˜ë¯¸ proxy_pass: 80 portë¡œ ë“¤ì–´ì˜¨ ê²ƒì„ 8000 portë¡œ ëŒë¦¬ê² ë‹¤ëŠ” ì˜ë¯¸ 7.6 docker-compose.yml # docker-compose.ymlì´ ìˆëŠ” ê²½ë¡œ: ~/test version: \"3\" services: \u003cì²« ë²ˆì§¸ service name\u003e: build: ./ container_name: \u003cìƒì„±ë  image name\u003e restart: always expose: - \"8000\" \u003cë‘ ë²ˆì§¸ service name\u003e: build: ./ container_name: \u003cìƒì„±ë  image name\u003e restart: always ports: - \"80:80\" depends_on: - \u003cì²« ë²ˆì§¸ service name\u003e version: versionì— ë”°ë¼ ì°¸ê³ í•˜ëŠ” ê·œê²©ì´ ë‹¬ë¼ì§„ë‹¤. About versions and upgrading services ë°‘ì— ë°”ë¡œ ì˜¤ëŠ” ê²ƒì€ ì—¬ëŸ¬ ì„œë¹„ìŠ¤ ëª…ì¹­ë“¤ì„ ì˜ë¯¸ expose: container ìƒì— ëª‡ ë²ˆ í¬íŠ¸ë¥¼ ì—´ì§€ ì§€ì • ports: ì„œë²„ì—ì„œ ë“¤ì–´ì™€ ë°”ë¡œ ë°›ê¸° ë•Œë¬¸ì— ì…ë ¥í•´ì•¼ í•œë‹¤. depends_on: service ê°„ ê´€ê³„ì„±ì„ ì§€ì •í•˜ëŠ” í‚¤ì›Œë“œë¡œì„œ, ì‹¤í–‰ ìˆœì„œë¥¼ ì •í•˜ëŠ” í‚¤ì›Œë“œë¡œ depends_onì— ìˆëŠ” serviceë¥¼ ì‹¤í–‰í•œ í›„, í•´ë‹¹ serviceë¥¼ ì‹¤í–‰ ìƒì„±ë  image nameì€ í˜„ì¬ test ê²½ë¡œì—ì„œ ì‹¤í–‰ë˜ì—ˆê¸° ë•Œ ë¬¸ì—, test-\u003cìƒì„±ë  image name\u003eìœ¼ë¡œ imageê°€ ìƒì„±ëœë‹¤. 7.7 docker compose ì‹¤í–‰ ë° ë‚´ë¦¬ê¸° docker compose ì‹¤í–‰í•˜ê¸°: docker compose up -d --build docker compose ë‚´ë¦¬ê¸°: docker compose down 8. ë„ì»¤ë¡œ ì¥ê³ , nginx, PostgreSQL í•¨ê»˜ ë°°í¬í•˜ê¸° ì „ì²´ì ì¸ ì„œë²„ êµ¬ì„±ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.\nê·¸ë¦¬ê³ , ì»¨í…Œì´ë„ˆì˜ ê´€ì ì—ì„œ ë°”ë¼ë³´ë©´ ì „ì²´ì ì¸ êµ¬ì„±ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.\ngunicornì„ ì„ íƒí•œ ì´ìœ  gunicornì„ ì‚¬ìš©í•œ ì´ìœ ëŠ” í˜„ì¬ ê³¼ì •ì—ì„œëŠ” ë¹ ë¥¸ ì†ë„ê°€ ë¶ˆí•„ìš”í•˜ê¸° ë•Œë¬¸ì´ë‹¤. ë¹ ë¥¸ ì†ë„ê°€ ë¹ ë¥¸ ì„±ëŠ¥ì´ í•„ìš”í•˜ë©´ wsgië¥¼ ì“´ë‹¤.\n8.1 file directory êµ¬ì¡° django, nginx, psqlì´ docker-compose.ymlê³¼ ë™ì¼í•œ file levelì´ì–´ì•¼ í•œë‹¤.\nê·¸ë¦¬ê³  django, nginx, psqlì—ëŠ” ê° í•´ë‹¹ë˜ëŠ” Dockerfileì´ ì¡´ì¬í•´ì•¼í•œë‹¤.\ndjangoì—ëŠ” requirements.txtê°€, nginxì—ëŠ” default.confê°€ ì¶”ê°€ë¡œ ì¡´ì¬í•´ì•¼ í•œë‹¤.\n./ â”œâ”€â”€ django â”‚Â â”œâ”€â”€ Devket â”‚Â â”‚Â â”œâ”€â”€ config â”‚Â â”‚Â â”‚Â â”œâ”€â”€ __init__.py â”‚Â â”‚Â â”‚Â â”œâ”€â”€ __pycache__ â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ __init__.cpython-310.pyc â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ settings.cpython-310.pyc â”‚Â â”‚Â â”‚Â â”‚Â â”œâ”€â”€ urls.cpython-310.pyc â”‚Â â”‚Â â”‚Â â”‚Â â””â”€â”€ wsgi.cpython-310.pyc â”‚Â â”‚Â â”‚Â â”œâ”€â”€ asgi.py â”‚Â â”‚Â â”‚Â â”œâ”€â”€ settings.py â”‚Â â”‚Â â”‚Â â”œâ”€â”€ urls.py â”‚Â â”‚Â â”‚Â â”œâ”€â”€ wsgi.py â”‚Â â”‚Â â”‚Â â””â”€â”€ ~ â”‚Â â”‚Â â”œâ”€â”€ db.sqlite3 â”‚Â â”‚Â â””â”€â”€ manage.py â”‚Â â”œâ”€â”€ Dockerfile â”‚Â â””â”€â”€ requirements.txt â”œâ”€â”€ docker-compose.yml â”œâ”€â”€ nginx â”‚Â â”œâ”€â”€ Dockerfile â”‚Â â””â”€â”€ default.conf â””â”€â”€ psql â””â”€â”€ Dockerfile 8.2 docker-compose.yml ìˆ˜ì •í•˜ê¸° DB ì¶”ê°€ì— ë”°ë¥¸ docker-compose.ymlì€ ë‹¤ìŒ ë‚´ìš©ì´ ì¶”ê°€ëœë‹¤.\nversion: \"3\" services: ... psql: build: ./psql container_name: psql restart: always volumes: - myvolume:var/lib/postgresql/data environment: - POSTGRES_USER=postgres - POSTGRES_PASSWORD=postgres - POSTGRES_DB=postgres volumes: myvolume: psql-testì—ëŠ” dbì´ê¸° ë•Œë¬¸ì— volumeì´ ì¶”ê°€ëœ ê±¸ ì•Œ ìˆ˜ ìˆë‹¤. â—ï¸ ë§Œì•½ ìš©ëŸ‰ ë¶€ì¡± errorê°€ ëœ° ê²½ìš° docker system prune --volumes ëª…ë ¹ì–´ë¥¼ ìƒìš©í•´ë³´ì.\n8.3 django settings.pyì˜ DB ì„¤ì • ë³€ê²½í•˜ê¸° django applicationì˜ settings.pyì˜ DATEBASES í™˜ê²½ ë³€ìˆ˜ë¥¼ ìˆ˜ì •í•œë‹¤.\n# before DATABASES = { 'default': { 'ENGINE': 'django.db.backends.sqlite3', 'NAME': BASE_DIR / 'db.sqlite3', } } # after DATABASES = { 'default': { 'ENGINE': 'django.db.backends.postgresql', 'NAME': 'postgres', 'USER': 'postgres', 'PASSWORD': 'postgres', 'HOST': 'db-test', 'PORT': 5432, } } 8.4 requirements ë³€ê²½ í›„, compose ì‹¤í–‰í•˜ê¸° requirements.txtì— psycopg2ë¥¼ ì¶”ê°€ compose ì‹¤í–‰: docker compose up -d --build â—ï¸ Error 01 invalid mount config for type â€œvolumeâ€: invalid mount path: â€˜var/lib/postgresql/dataâ€™ mount path must be absolute\nâ€˜var/lib/postgresql/dataâ€™ ì•ì— /ê°€ ì—†ì–´ì„œ ìƒê¸´ ë¬¸ì œë‹¤.\nâ—ï¸ Error 02 strconv.Atoi: parsing â€œâ€: invalid syntax\nsudo docker system pruneì„ ì‹¤í–‰í•œë‹¤.\nReference ëŸ¬ë‹ìŠ¤í‘¼ì¦ˆ - ë‚˜ë…¸ë””ê·¸ë¦¬ Python \u0026 Django backed course ","wordCount":"2181","inLanguage":"en","datePublished":"2022-12-08T13:42:28+09:00","dateModified":"2022-12-08T13:42:28+09:00","author":{"@type":"Person","name":"Jeha00"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://jeha00.github.io/post/docker/04_deployment-by-docker/"},"publisher":{"@type":"Organization","name":"Jeha00 DevLog","logo":{"@type":"ImageObject","url":"http://jeha00.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://jeha00.github.io/ accesskey=h title="Jeha00 (Alt + H)">Jeha00</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=http://jeha00.github.io/archives/ title=Archive><span>Archive</span></a></li><li><a href=http://jeha00.github.io/categories/ title=Categories><span>Categories</span></a></li><li><a href=http://jeha00.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=http://jeha00.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=http://jeha00.github.io/>Home</a>&nbsp;Â»&nbsp;<a href=http://jeha00.github.io/post/>Posts</a></div><h1 class=post-title>Docker study: Docker-composeë¡œ nginx, django, postgreSQLì„ ì—°ê²°í•˜ê³  ë°°í¬í•˜ê¸°</h1><div class=post-meta><span title='2022-12-08 13:42:28 +0900 KST'>December 8, 2022</span>&nbsp;Â·&nbsp;11 min&nbsp;Â·&nbsp;Jeha00&nbsp;|&nbsp;<a href=https://github.com/JeHa00/blog/content/post/Docker/04_deployment-by-docker.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#0-introduction aria-label="0. Introduction">0. Introduction</a></li><li><a href=#1-postgresql-%ec%bb%a8%ed%85%8c%ec%9d%b4%eb%84%88%eb%a1%9c-%eb%b0%b0%ed%8f%ac%ed%95%98%ea%b8%b0 aria-label="1. PostgreSQL ì»¨í…Œì´ë„ˆë¡œ ë°°í¬í•˜ê¸°">1. PostgreSQL ì»¨í…Œì´ë„ˆë¡œ ë°°í¬í•˜ê¸°</a><ul><ul><li><a href=#db-%ea%b4%80%eb%a6%ac aria-label="DB ê´€ë¦¬">DB ê´€ë¦¬</a></li><li><a href=#%ec%bb%a8%ed%85%8c%ec%9d%b4%eb%84%88-%eb%82%b4%eb%b6%80-%ec%a0%91%ec%86%8d%ed%95%98%ea%b8%b0 aria-label="ì»¨í…Œì´ë„ˆ ë‚´ë¶€ ì ‘ì†í•˜ê¸°">ì»¨í…Œì´ë„ˆ ë‚´ë¶€ ì ‘ì†í•˜ê¸°</a></li><li><a href=#dockerfile%ec%9d%b4%eb%9e%80 aria-label=Dockerfileì´ë€?>Dockerfileì´ë€?</a></li><li><a href=#%eb%8f%84%ec%bb%a4-%ed%8c%8c%ec%9d%bc%ec%9d%84-%ed%86%b5%ed%95%b4-postgresql-container-%eb%9d%84%ec%9a%b0%ea%b8%b0 aria-label="ë„ì»¤ íŒŒì¼ì„ í†µí•´ postgreSQL container ë„ìš°ê¸°">ë„ì»¤ íŒŒì¼ì„ í†µí•´ postgreSQL container ë„ìš°ê¸°</a></li></ul></ul></li><li><a href=#2-%eb%8f%84%ec%bb%a4-%eb%b3%bc%eb%a5%a8docker-volume aria-label="2. ë„ì»¤ ë³¼ë¥¨(docker volume)">2. ë„ì»¤ ë³¼ë¥¨(docker volume)</a><ul><li><a href=#21-%eb%a1%9c%ec%bb%ac-%ea%b2%bd%eb%a1%9c%eb%a1%9c-%ec%97%b0%ea%b2%b0 aria-label="2.1 ë¡œì»¬ ê²½ë¡œë¡œ ì—°ê²°">2.1 ë¡œì»¬ ê²½ë¡œë¡œ ì—°ê²°</a><ul><li><a href=#%ec%97%b0%ea%b2%b0%ed%95%a0-%ed%98%b8%ec%8a%a4%ed%8a%b8-%ea%b2%bd%eb%a1%9c-%ed%99%95%ec%9d%b8 aria-label="ì—°ê²°í•  í˜¸ìŠ¤íŠ¸ ê²½ë¡œ í™•ì¸">ì—°ê²°í•  í˜¸ìŠ¤íŠ¸ ê²½ë¡œ í™•ì¸</a></li><li><a href=#container-ls%eb%a1%9c-%ed%99%95%ec%9d%b8-%ed%9b%84-%ec%a0%91%ec%86%8d%ed%95%98%ea%b8%b0 aria-label="container lsë¡œ í™•ì¸ í›„, ì ‘ì†í•˜ê¸°">container lsë¡œ í™•ì¸ í›„, ì ‘ì†í•˜ê¸°</a></li><li><a href=#%ec%a0%91%ec%86%8d%ed%95%9c-container%ec%97%90%ec%84%9c-%ec%83%9d%ec%84%b1-%ed%9b%84-docker-host%ec%97%90%ec%84%9c%eb%8f%84-%ed%99%95%ec%9d%b8%ed%95%98%ea%b8%b0 aria-label="ì ‘ì†í•œ containerì—ì„œ ìƒì„± í›„, docker hostì—ì„œë„ í™•ì¸í•˜ê¸°">ì ‘ì†í•œ containerì—ì„œ ìƒì„± í›„, docker hostì—ì„œë„ í™•ì¸í•˜ê¸°</a></li></ul></li><li><a href=#22-%eb%8f%84%ec%bb%a4-%eb%b3%bc%eb%a5%a8%ec%9c%bc%eb%a1%9c-%ec%97%b0%ea%b2%b0%ed%95%98%ea%b8%b0 aria-label="2.2 ë„ì»¤ ë³¼ë¥¨ìœ¼ë¡œ ì—°ê²°í•˜ê¸°">2.2 ë„ì»¤ ë³¼ë¥¨ìœ¼ë¡œ ì—°ê²°í•˜ê¸°</a><ul><li><a href=#%ec%83%9d%ec%84%b1-%ed%9b%84-%eb%82%b4%ec%9a%a9-%ed%99%95%ec%9d%b8%ed%95%98%ea%b8%b0 aria-label="ìƒì„± í›„, ë‚´ìš© í™•ì¸í•˜ê¸°">ìƒì„± í›„, ë‚´ìš© í™•ì¸í•˜ê¸°</a></li><li><a href=#docker-host%ec%9d%98-%ea%b2%bd%eb%a1%9c%ec%99%80-%ec%97%b0%ea%b2%b0%ed%95%98%ea%b8%b0 aria-label="docker hostì˜ ê²½ë¡œì™€ ì—°ê²°í•˜ê¸°">docker hostì˜ ê²½ë¡œì™€ ì—°ê²°í•˜ê¸°</a></li><li><a href=#postgresql-%eb%8d%b0%ec%9d%b4%ed%84%b0-%ec%83%9d%ec%84%b1-%ec%bb%a8%ed%85%8c%ec%9d%b4%eb%84%88-%ec%82%ad%ec%a0%9c-%ed%9b%84-%ec%8b%a4%ed%96%89%ed%95%98%ec%97%ac-%eb%8d%b0%ec%9d%b4%ed%84%b0-%ed%99%95%ec%9d%b8%ed%95%98%ea%b8%b0 aria-label="postgresql ë°ì´í„° ìƒì„±, ì»¨í…Œì´ë„ˆ ì‚­ì œ í›„ ì‹¤í–‰í•˜ì—¬ ë°ì´í„° í™•ì¸í•˜ê¸°">postgresql ë°ì´í„° ìƒì„±, ì»¨í…Œì´ë„ˆ ì‚­ì œ í›„ ì‹¤í–‰í•˜ì—¬ ë°ì´í„° í™•ì¸í•˜ê¸°</a></li></ul></li></ul></li><li><a href=#3-docker%eb%a1%9c-django-%eb%b0%b0%ed%8f%ac%ed%95%98%ea%b8%b0 aria-label="3. Dockerë¡œ django ë°°í¬í•˜ê¸°">3. Dockerë¡œ django ë°°í¬í•˜ê¸°</a><ul><li><a href=#31-django-image-pull-%eb%b0%9b%ea%b3%a0-%ed%99%95%ec%9d%b8%ed%95%98%ea%b8%b0 aria-label="3.1 Django image pull ë°›ê³  í™•ì¸í•˜ê¸°">3.1 Django image pull ë°›ê³  í™•ì¸í•˜ê¸°</a></li><li><a href=#32-%ec%9e%a5%ea%b3%a0-%ec%bb%a8%ed%85%8c%ec%9d%b4%eb%84%88-%ea%b0%80%eb%8f%99 aria-label="3.2 ì¥ê³  ì»¨í…Œì´ë„ˆ ê°€ë™">3.2 ì¥ê³  ì»¨í…Œì´ë„ˆ ê°€ë™</a><ul><li><a href=#%eb%b0%b0%ed%8f%ac%ec%8b%9c%ec%8a%a4%ed%85%9c-%ea%b5%ac%ec%a1%b0-%ec%9d%b4%ed%95%b4%ed%95%98%ea%b8%b0 aria-label="ë°°í¬ì‹œìŠ¤í…œ êµ¬ì¡° ì´í•´í•˜ê¸°">ë°°í¬ì‹œìŠ¤í…œ êµ¬ì¡° ì´í•´í•˜ê¸°</a></li><li><a href=#%ec%9e%a5%ea%b3%a0-%ec%bb%a8%ed%85%8c%ec%9d%b4%eb%84%88-%ea%b0%80%eb%8f%99%ed%95%98%ea%b8%b0 aria-label="ì¥ê³  ì»¨í…Œì´ë„ˆ ê°€ë™í•˜ê¸°">ì¥ê³  ì»¨í…Œì´ë„ˆ ê°€ë™í•˜ê¸°</a></li><li><a href=#-%ec%b0%b8%ea%b3%a0%ec%82%ac%ed%95%ad aria-label="ğŸ”† ì°¸ê³ ì‚¬í•­">ğŸ”† ì°¸ê³ ì‚¬í•­</a></li><li><a href=#error-starting-userland-proxy aria-label="â—ï¸Error starting userland proxy">â—ï¸Error starting userland proxy</a></li><li><a href=#33-docker-container-%ec%a0%95%ec%a7%80-%eb%b0%8f-%ec%9e%ac%ea%b0%80%eb%8f%99 aria-label="3.3 docker container ì •ì§€ ë° ì¬ê°€ë™">3.3 docker container ì •ì§€ ë° ì¬ê°€ë™</a></li></ul></li></ul></li><li><a href=#4-%ec%84%9c%eb%b2%84%ec%97%90-%ec%9e%a5%ea%b3%a0-%ec%bd%94%eb%93%9c-%eb%b0%b0%ed%8f%ac%ed%95%98%ea%b8%b0 aria-label="4. ì„œë²„ì— ì¥ê³  ì½”ë“œ ë°°í¬í•˜ê¸°">4. ì„œë²„ì— ì¥ê³  ì½”ë“œ ë°°í¬í•˜ê¸°</a><ul><ul><li><a href=#41-aws-%ec%99%b8%eb%b6%80-%ec%a0%91%ec%86%8d%ec%9d%84-%ec%9c%84%ed%95%9c-%ed%8f%ac%ed%8a%b8-%ec%84%a4%ec%a0%95 aria-label="4.1 AWS ì™¸ë¶€ ì ‘ì†ì„ ìœ„í•œ í¬íŠ¸ ì„¤ì •">4.1 AWS ì™¸ë¶€ ì ‘ì†ì„ ìœ„í•œ í¬íŠ¸ ì„¤ì •</a></li><li><a href=#42-%ec%9e%a5%ea%b3%a0-%ed%94%84%eb%a1%9c%ec%a0%9d%ed%8a%b8-%ec%83%9d%ec%84%b1-%eb%b0%8f-%ea%b0%80%eb%8f%99 aria-label="4.2 ì¥ê³  í”„ë¡œì íŠ¸ ìƒì„± ë° ê°€ë™">4.2 ì¥ê³  í”„ë¡œì íŠ¸ ìƒì„± ë° ê°€ë™</a></li><li><a href=#43-%ec%9e%a5%ea%b3%a0-%ec%84%a4%ec%a0%95%ed%8c%8c%ec%9d%bc-%ec%88%98%ec%a0%95-%eb%b0%8f-%ec%a0%91%ec%86%8d-%ed%99%95%ec%9d%b8 aria-label="4.3 ì¥ê³  ì„¤ì •íŒŒì¼ ìˆ˜ì • ë° ì ‘ì† í™•ì¸">4.3 ì¥ê³  ì„¤ì •íŒŒì¼ ìˆ˜ì • ë° ì ‘ì† í™•ì¸</a></li></ul><li><a href=#-%eb%b0%9c%ec%83%9d%ed%95%9c-error aria-label="â—ï¸ ë°œìƒí•œ Error">â—ï¸ ë°œìƒí•œ Error</a></li></ul></li><li><a href=#5-%ec%a7%81%ec%a0%91-%ec%a7%a0-%ec%bd%94%eb%93%9c-container%eb%a1%9c-%eb%b0%b0%ed%8f%ac%ed%95%98%ea%b8%b0 aria-label="5. ì§ì ‘ ì§  ì½”ë“œ containerë¡œ ë°°í¬í•˜ê¸°">5. ì§ì ‘ ì§  ì½”ë“œ containerë¡œ ë°°í¬í•˜ê¸°</a><ul><li><a href=#51-%eb%94%94%eb%a0%89%ed%86%a0%eb%a6%ac-%ec%a0%95%eb%a6%ac-tree-%ec%84%a4%ec%b9%98%ed%95%98%ec%97%ac-%ed%8c%8c%ec%9d%bc-%ea%b5%ac%ec%a1%b0-%ed%99%95%ec%9d%b8%ed%95%98%ea%b8%b0 aria-label="5.1 ë””ë ‰í† ë¦¬ ì •ë¦¬, tree ì„¤ì¹˜í•˜ì—¬ íŒŒì¼ êµ¬ì¡° í™•ì¸í•˜ê¸°">5.1 ë””ë ‰í† ë¦¬ ì •ë¦¬, tree ì„¤ì¹˜í•˜ì—¬ íŒŒì¼ êµ¬ì¡° í™•ì¸í•˜ê¸°</a></li><li><a href=#52-requirementstxt-%ed%8c%8c%ec%9d%bc-%ec%83%9d%ec%84%b1 aria-label="5.2 requirements.txt íŒŒì¼ ìƒì„±">5.2 requirements.txt íŒŒì¼ ìƒì„±</a></li><li><a href=#53-dockerfile-%ec%83%9d%ec%84%b1%ed%95%98%ea%b8%b0 aria-label="5.3 Dockerfile ìƒì„±í•˜ê¸°">5.3 Dockerfile ìƒì„±í•˜ê¸°</a><ul><li><a href=#dockerfile-%ec%83%9d%ec%84%b1%ed%95%98%ea%b8%b0 aria-label="Dockerfile ìƒì„±í•˜ê¸°">Dockerfile ìƒì„±í•˜ê¸°</a></li><li><a href=#dockerfile-%ec%9d%98-file-level aria-label="Dockerfile ì˜ file level">Dockerfile ì˜ file level</a></li></ul></li><li><a href=#54-image-build-%ed%95%98%ea%b8%b0 aria-label="5.4 image build í•˜ê¸°">5.4 image build í•˜ê¸°</a><ul><li><a href=#%eb%b9%8c%eb%93%9c%ed%95%9c-%ec%9d%b4%eb%af%b8%ec%a7%80-%ec%8b%a4%ed%96%89%ed%95%98%ec%97%ac-%ec%bb%a8%ed%85%8c%ec%9d%b4%eb%84%88-%ea%b0%80%eb%8f%99 aria-label="ë¹Œë“œí•œ ì´ë¯¸ì§€ ì‹¤í–‰í•˜ì—¬ ì»¨í…Œì´ë„ˆ ê°€ë™">ë¹Œë“œí•œ ì´ë¯¸ì§€ ì‹¤í–‰í•˜ì—¬ ì»¨í…Œì´ë„ˆ ê°€ë™</a></li></ul></li></ul></li><li><a href=#6-docker%eb%a1%9c-nginx-%eb%b0%b0%ed%8f%ac%ed%95%98%ea%b8%b0 aria-label="6. dockerë¡œ nginx ë°°í¬í•˜ê¸°">6. dockerë¡œ nginx ë°°í¬í•˜ê¸°</a><ul><li><a href=#61-nginx-%eb%94%94%eb%a0%89%ed%86%a0%eb%a6%ac-%ec%83%9d%ec%84%b1 aria-label="6.1 nginx ë””ë ‰í† ë¦¬ ìƒì„±">6.1 nginx ë””ë ‰í† ë¦¬ ìƒì„±</a></li><li><a href=#62-dockerfile-%ec%83%9d%ec%84%b1 aria-label="6.2 Dockerfile ìƒì„±">6.2 Dockerfile ìƒì„±</a><ul><li><a href=#file-level aria-label="file level">file level</a></li></ul></li><li><a href=#63-image-build-%eb%b0%8f-%ed%99%95%ec%9d%b8 aria-label="6.3 image build ë° í™•ì¸">6.3 image build ë° í™•ì¸</a><ul><li><a href=#image-build aria-label="image build">image build</a></li><li><a href=#image-%ed%99%95%ec%9d%b8 aria-label="image í™•ì¸">image í™•ì¸</a></li></ul></li><li><a href=#64-nginx-container-%ea%b0%80%eb%8f%99 aria-label="6.4 nginx container ê°€ë™">6.4 nginx container ê°€ë™</a><ul><li><a href=#container-%ea%b0%80%eb%8f%99 aria-label="container ê°€ë™">container ê°€ë™</a></li><li><a href=#%eb%aa%a9%eb%a1%9d-%ed%99%95%ec%9d%b8 aria-label="ëª©ë¡ í™•ì¸">ëª©ë¡ í™•ì¸</a></li></ul></li></ul></li><li><a href=#7-docker-compose%eb%a1%9c-%ec%9e%a5%ea%b3%a0%ec%99%80-nginx-%ed%95%a8%ea%bb%98-%eb%b0%b0%ed%8f%ac%ed%95%98%ea%b8%b0 aria-label="7. Docker composeë¡œ ì¥ê³ ì™€ nginx í•¨ê»˜ ë°°í¬í•˜ê¸°">7. Docker composeë¡œ ì¥ê³ ì™€ nginx í•¨ê»˜ ë°°í¬í•˜ê¸°</a><ul><li><a href=#71-docker-compose-%ea%b0%9c%eb%85%90--%ec%84%a4%ec%b9%98 aria-label="7.1 Docker compose ê°œë… &amp;amp; ì„¤ì¹˜">7.1 Docker compose ê°œë… & ì„¤ì¹˜</a><ul><li><a href=#docker-compose-concept aria-label="Docker compose concept">Docker compose concept</a></li><li><a href=#yaml aria-label=YAML>YAML</a></li></ul></li><li><a href=#72-docker-compose-installation aria-label="7.2 Docker compose installation">7.2 Docker compose installation</a><ul><li><a href=#-error aria-label="â—ï¸ Error">â—ï¸ Error</a></li></ul></li><li><a href=#73-directory-%ec%a0%95%eb%a6%ac aria-label="7.3 directory ì •ë¦¬">7.3 directory ì •ë¦¬</a></li><li><a href=#74-dockerfile-%ec%88%98%ec%a0%95 aria-label="7.4 Dockerfile ìˆ˜ì •">7.4 Dockerfile ìˆ˜ì •</a><ul><li><a href=#django-directory-%ec%95%88%ec%97%90-%ec%9e%88%eb%8a%94-dockerfile-%ec%88%98%ec%a0%95 aria-label="django directory ì•ˆì— ìˆëŠ” dockerfile ìˆ˜ì •">django directory ì•ˆì— ìˆëŠ” dockerfile ìˆ˜ì •</a></li><li><a href=#nginx-directory-%ec%95%88%ec%97%90-%ec%9e%88%eb%8a%94-dockerfile-%ec%88%98%ec%a0%95 aria-label="nginx directory ì•ˆì— ìˆëŠ” dockerfile ìˆ˜ì •">nginx directory ì•ˆì— ìˆëŠ” dockerfile ìˆ˜ì •</a></li></ul></li><li><a href=#75-nginx%ec%97%90-defaultconf-%ec%b6%94%ea%b0%80 aria-label="7.5 nginxì— default.conf ì¶”ê°€">7.5 nginxì— default.conf ì¶”ê°€</a></li><li><a href=#76-docker-composeyml aria-label="7.6 docker-compose.yml">7.6 docker-compose.yml</a></li><li><a href=#77-docker-compose-%ec%8b%a4%ed%96%89-%eb%b0%8f-%eb%82%b4%eb%a6%ac%ea%b8%b0 aria-label="7.7 docker compose ì‹¤í–‰ ë° ë‚´ë¦¬ê¸°">7.7 docker compose ì‹¤í–‰ ë° ë‚´ë¦¬ê¸°</a></li></ul></li><li><a href=#8-%eb%8f%84%ec%bb%a4%eb%a1%9c-%ec%9e%a5%ea%b3%a0-nginx-postgresql-%ed%95%a8%ea%bb%98-%eb%b0%b0%ed%8f%ac%ed%95%98%ea%b8%b0 aria-label="8. ë„ì»¤ë¡œ ì¥ê³ , nginx, PostgreSQL í•¨ê»˜ ë°°í¬í•˜ê¸°">8. ë„ì»¤ë¡œ ì¥ê³ , nginx, PostgreSQL í•¨ê»˜ ë°°í¬í•˜ê¸°</a><ul><ul><li><a href=#gunicorn%ec%9d%84-%ec%84%a0%ed%83%9d%ed%95%9c-%ec%9d%b4%ec%9c%a0 aria-label="gunicornì„ ì„ íƒí•œ ì´ìœ ">gunicornì„ ì„ íƒí•œ ì´ìœ </a></li></ul><li><a href=#81-file-directory-%ea%b5%ac%ec%a1%b0 aria-label="8.1 file directory êµ¬ì¡°">8.1 file directory êµ¬ì¡°</a></li><li><a href=#82-docker-composeyml-%ec%88%98%ec%a0%95%ed%95%98%ea%b8%b0 aria-label="8.2 docker-compose.yml ìˆ˜ì •í•˜ê¸°">8.2 docker-compose.yml ìˆ˜ì •í•˜ê¸°</a></li><li><a href=#83-django-settingspy%ec%9d%98-db-%ec%84%a4%ec%a0%95-%eb%b3%80%ea%b2%bd%ed%95%98%ea%b8%b0 aria-label="8.3 django settings.pyì˜ DB ì„¤ì • ë³€ê²½í•˜ê¸°">8.3 django settings.pyì˜ DB ì„¤ì • ë³€ê²½í•˜ê¸°</a></li><li><a href=#84-requirements-%eb%b3%80%ea%b2%bd-%ed%9b%84-compose-%ec%8b%a4%ed%96%89%ed%95%98%ea%b8%b0 aria-label="8.4 requirements ë³€ê²½ í›„, compose ì‹¤í–‰í•˜ê¸°">8.4 requirements ë³€ê²½ í›„, compose ì‹¤í–‰í•˜ê¸°</a><ul><li><a href=#-error-01 aria-label="â—ï¸ Error 01">â—ï¸ Error 01</a></li><li><a href=#-error-02 aria-label="â—ï¸ Error 02">â—ï¸ Error 02</a></li></ul></li></ul></li><li><a href=#reference aria-label=Reference>Reference</a></li></ul></div></details></div><div class=post-content><h1 id=0-introduction>0. Introduction<a hidden class=anchor aria-hidden=true href=#0-introduction>#</a></h1><ul><li><p>í•´ë‹¹ ê°•ì˜ëŠ” <a href=https://learningspoons.com/course/detail/django-backend/>ëŸ¬ë‹ìŠ¤í‘¼ì¦ˆ - ë‚˜ë…¸ë””ê·¸ë¦¬ Python & Django backed course</a>ì˜ ì¥ì² ì› ê°•ì‚¬ë‹˜ì˜ docker ê°•ì˜ë¥¼ í•™ìŠµí•œ ë‚´ìš©ì…ë‹ˆë‹¤.</p></li><li><p>ì¸ìŠ¤í„´ìŠ¤ëŠ” ìš°ë¶„íˆ¬ë¥¼ ì‚¬ìš©í•œë‹¤.</p></li></ul><hr><h1 id=1-postgresql-ì»¨í…Œì´ë„ˆë¡œ-ë°°í¬í•˜ê¸°>1. PostgreSQL ì»¨í…Œì´ë„ˆë¡œ ë°°í¬í•˜ê¸°<a hidden class=anchor aria-hidden=true href=#1-postgresql-ì»¨í…Œì´ë„ˆë¡œ-ë°°í¬í•˜ê¸°>#</a></h1><h3 id=db-ê´€ë¦¬>DB ê´€ë¦¬<a hidden class=anchor aria-hidden=true href=#db-ê´€ë¦¬>#</a></h3><p>dbë¥¼ ì»¨í…Œì´ë„ˆì— ë„ì–´ì„œ ê´€ë¦¬í•˜ëŠ”ê°€, ì•„ë‹ˆë©´ ìŒ© ì„œë²„ì— ê´€ë¦¬í•˜ëŠ”ê°€ ëŠ” í˜¸ë¶ˆí˜¸ê°€ ê°ˆë¦°ë‹¤.</p><p>ì™œëƒí•˜ë©´ ì»¨í…Œì´ë„ˆì˜ ê¸°ë³¸ì´ ì§€ì›Œì ¸ë„ ìƒê´€ì—†ë‹¤ëŠ” ì „ì œì´ê¸° ë•Œë¬¸ì—, dbëŠ” ì§€ì›Œì§€ë©´ ì•ˆë˜ê¸° ë•Œë¬¸ì— ì»¨í…Œì´ë„ˆì— ì‚¬ìš©ë˜ì§€ ì•ŠëŠ”ë‹¤.</p><h3 id=ì»¨í…Œì´ë„ˆ-ë‚´ë¶€-ì ‘ì†í•˜ê¸°>ì»¨í…Œì´ë„ˆ ë‚´ë¶€ ì ‘ì†í•˜ê¸°<a hidden class=anchor aria-hidden=true href=#ì»¨í…Œì´ë„ˆ-ë‚´ë¶€-ì ‘ì†í•˜ê¸°>#</a></h3><p>ì»¨í…Œì´ë„ˆ ë‚´ë¶€ë¡œ ë“¤ì–´ê°€ê¸°: <code>docker exec -it &lt;Container ID> /bin/bash</code></p><ul><li>ê·¸ë˜ì„œ ì´ ë‚´ë¶€ì—ì„œ ëª…ë ¹ì–´ë¥¼ ì˜ëª» ì…ë ¥í•˜ë©´ ì»¨í…Œì´ë„ˆì—ì„œ ë‚˜ê°”ë‹¤ê°€ Killí•˜ë©´ ëœë‹¤.</li></ul><p>superuserë¡œ ë¡œê·¸ì¸í•˜ê¸°: <code>psql -U postgres</code> ë¥¼ ì˜ë¯¸í•œë‹¤.</p><ul><li><p><code>\dt</code>: í…Œì´ë¸” ì¡°íšŒ</p></li><li><p>postgresql ì¢…ë£Œ ëª…ë ¹ì–´: <code>\q</code></p></li></ul><h3 id=dockerfileì´ë€>Dockerfileì´ë€?<a hidden class=anchor aria-hidden=true href=#dockerfileì´ë€>#</a></h3><ul><li>ë„ì»¤ ì´ë¯¸ì§€ì— ëŒ€í•œ ì •ë³´ë¥¼ ê¸°ìˆ í•œ í…œí”Œë¦¿</li><li>íŒ¨í‚¤ì§€, ëª…ë ¹ì–´, í™˜ê²½ ë³€ìˆ˜ ì„¤ì •ë“±ì„ ê¸°ë¡</li></ul><h3 id=ë„ì»¤-íŒŒì¼ì„-í†µí•´-postgresql-container-ë„ìš°ê¸°>ë„ì»¤ íŒŒì¼ì„ í†µí•´ postgreSQL container ë„ìš°ê¸°<a hidden class=anchor aria-hidden=true href=#ë„ì»¤-íŒŒì¼ì„-í†µí•´-postgresql-container-ë„ìš°ê¸°>#</a></h3><p>PostgreSQLì— ëŒ€í•œ Dockerfileì„ ë‹´ì„ directoryë¥¼ ìƒì„±í•œë‹¤.</p><p>í•´ë‹¹ ê²½ë¡œì— <code>vim Dockerfile</code>ë¥¼ ì‹¤í–‰í•˜ì—¬ <code>FROM postgres</code>ë¥¼ ì…ë ¥í•œë‹¤.</p><hr><h1 id=2-ë„ì»¤-ë³¼ë¥¨docker-volume>2. ë„ì»¤ ë³¼ë¥¨(docker volume)<a hidden class=anchor aria-hidden=true href=#2-ë„ì»¤-ë³¼ë¥¨docker-volume>#</a></h1><blockquote><p><strong><em>ë„ì»¤ ë³¼ë¥¨ì´ë€? ë„ì»¤ ì»¨í…Œì´ë„ˆì— ìˆëŠ” ë°ì´í„°ë¥¼ ë³´ê´€í•˜ê¸° ìœ„í•´ì„œ ì‚¬ìš©í•˜ëŠ” íˆ´</em></strong></p></blockquote><p>ë„ì»¤ ë³¼ë¥¨ì„ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì—ëŠ” 2ê°€ì§€ ë°©ì‹ì´ ìˆë‹¤.</p><ul><li>EC2 ì„œë²„ ë‚´ë¶€ì˜ file system ê²½ë¡œì— ì—°ê²°í•˜ëŠ” ê²ƒ</li><li>volumeì— ì—°ê²°í•˜ëŠ” ê²ƒ</li></ul><p>ìœ„ ë°©ì‹ë“¤ì„ ì‚¬ìš©í•˜ë©´ file systemê³¼ ê³„ì†í•´ì„œ ì—°ê²°ë˜ì–´ ìˆê¸° ë•Œë¬¸ì—, DBê°€ êº¼ì ¸ë„ file systemê¹Œì§€ ë‹¤ ì €ì¥ë˜ì–´ ìˆì–´ì„œ ë°ì´í„°ë¥¼ ë³´ì¡´í•  ìˆ˜ ìˆë‹¤.</p><p>ë„ì»¤ì—ì„œëŠ” ë³¼ë¥¨ì„ ìƒì„±í•˜ì—¬ ì‚¬ìš©í•˜ê¸°ë¥¼ ì¶”ì²œí•œë‹¤.</p><h2 id=21-ë¡œì»¬-ê²½ë¡œë¡œ-ì—°ê²°>2.1 ë¡œì»¬ ê²½ë¡œë¡œ ì—°ê²°<a hidden class=anchor aria-hidden=true href=#21-ë¡œì»¬-ê²½ë¡œë¡œ-ì—°ê²°>#</a></h2><p><img loading=lazy src=https://user-images.githubusercontent.com/78094972/206185981-93ac908c-1cae-4e9d-ba82-898ee0cb11b0.png alt=image></p><ul><li><strong>ì´ ë°©ì‹ì˜ ë¬¸ì œì </strong> : í•„ìš”í•œ ê²½ë¡œë¼ ìƒê°í•˜ì—¬ ì‚¬ìš©ìê°€ ë¬´ì‹¬ì½” ê²½ë¡œë¥¼ ì‚­ì œí•  ìˆ˜ ìˆë‹¤.</li></ul><h3 id=ì—°ê²°í• -í˜¸ìŠ¤íŠ¸-ê²½ë¡œ-í™•ì¸>ì—°ê²°í•  í˜¸ìŠ¤íŠ¸ ê²½ë¡œ í™•ì¸<a hidden class=anchor aria-hidden=true href=#ì—°ê²°í• -í˜¸ìŠ¤íŠ¸-ê²½ë¡œ-í™•ì¸>#</a></h3><blockquote><p>docker run -e POSTGRES_PASSWORD=mysecretpassword -v ~/test:/test:rw -d postgres</p></blockquote><ul><li><p><code>-v</code>: volumeì„ ì˜ë¯¸</p></li><li><p>local ìƒì˜ <code>~/work/test</code>ì™€ container ìƒì˜ <code>~/work/test</code>ë¥¼ ì—°ê²°</p></li><li><p><code>rw</code>: readì™€ write ê¶Œí•œì„ ì£¼ê² ë‹¤ëŠ” ê±¸ ì˜ë¯¸</p></li><li><p><code>-d</code>: backgroundìœ¼ë¡œ ì‘ë™í•œë‹¤ëŠ” ê±¸ ì˜ë¯¸</p></li></ul><h3 id=container-lsë¡œ-í™•ì¸-í›„-ì ‘ì†í•˜ê¸°>container lsë¡œ í™•ì¸ í›„, ì ‘ì†í•˜ê¸°<a hidden class=anchor aria-hidden=true href=#container-lsë¡œ-í™•ì¸-í›„-ì ‘ì†í•˜ê¸°>#</a></h3><ul><li><code>docker container ls</code></li><li><code>docker exec -it &lt;container id> /bin/bash</code></li><li>ì ‘ì†í•˜ë©´ <code>/test</code>ê°€ ìˆëŠ” ê±¸ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ê·¸ëŸ¬ë©´ /test ê²½ë¡œë¡œ ì´ë™í•œë‹¤(<code>cd test</code>).</li><li><code>ls</code>ë¡œ í™•ì¸í•˜ë©´ postgresqlì— ì ‘ì†í•˜ê¸° ì „ê³¼ ë™ì¼í•˜ë‹¤ëŠ” ê±¸ ì•Œ ìˆ˜ ìˆë‹¤.</li></ul><h3 id=ì ‘ì†í•œ-containerì—ì„œ-ìƒì„±-í›„-docker-hostì—ì„œë„-í™•ì¸í•˜ê¸°>ì ‘ì†í•œ containerì—ì„œ ìƒì„± í›„, docker hostì—ì„œë„ í™•ì¸í•˜ê¸°<a hidden class=anchor aria-hidden=true href=#ì ‘ì†í•œ-containerì—ì„œ-ìƒì„±-í›„-docker-hostì—ì„œë„-í™•ì¸í•˜ê¸°>#</a></h3><ul><li><p><code>mkdir inside</code> í›„, exití•˜ì—¬ ë‚˜ì˜¨ë‹¤.</p></li><li><p>ë™ì¼í•œ ê²½ë¡œë¡œ ì´ë™í•˜ì—¬ <code>ls</code>ë¡œ í™•ì¸í•˜ë©´ <code>inside</code> directoryê°€ ìˆëŠ” ê±¸ ì•Œ ìˆ˜ ìˆë‹¤.</p></li><li><p>ìƒì„±í•œ directoryë¥¼ docker hostì—ì„œ ì‚­ì œí•œ í›„, containerì— ì ‘ì†í•˜ì—¬ í™•ì¸í•˜ë©´ ë˜‘ê°™ì´ ì‚­ì œëœ ê±¸ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p></li></ul><h2 id=22-ë„ì»¤-ë³¼ë¥¨ìœ¼ë¡œ-ì—°ê²°í•˜ê¸°>2.2 ë„ì»¤ ë³¼ë¥¨ìœ¼ë¡œ ì—°ê²°í•˜ê¸°<a hidden class=anchor aria-hidden=true href=#22-ë„ì»¤-ë³¼ë¥¨ìœ¼ë¡œ-ì—°ê²°í•˜ê¸°>#</a></h2><p><img loading=lazy src=https://user-images.githubusercontent.com/78094972/206185086-a0071191-96ea-4b05-a7a6-0b9f740107a9.png alt=image></p><h3 id=ìƒì„±-í›„-ë‚´ìš©-í™•ì¸í•˜ê¸°>ìƒì„± í›„, ë‚´ìš© í™•ì¸í•˜ê¸°<a hidden class=anchor aria-hidden=true href=#ìƒì„±-í›„-ë‚´ìš©-í™•ì¸í•˜ê¸°>#</a></h3><p>ì²« ë²ˆì§¸, ëª…ë ¹ì–´ <code>docker volume create &lt;ë³¼ë¥¨ëª…></code>ì„ ì‚¬ìš©í•˜ì—¬ ë³¼ë¥¨ì„ ec2 ë‚´ì—ì„œ ìƒì„±í•œë‹¤.</p><p>ìƒì„± í›„, ë³¼ë¥¨ ëª©ë¡ì„ í™•ì¸í•˜ê³  ì‹¶ìœ¼ë©´ <code>docker volume ls</code>ë¥¼ ì…ë ¥í•œë‹¤.</p><p>ìƒì„±í•œ ë³¼ë¥¨ì— ëŒ€í•œ ì •ë³´ë¥¼ í™•ì¸í•˜ê³  ì‹¶ìœ¼ë©´ <code>docker volume inspect &lt;ìƒì„±í•œ ë³¼ë¥¨ëª…></code>ì„ ì…ë ¥í•œë‹¤.</p><ul><li>í™•ì¸ëœ ì •ë³´ë“¤ì—ì„œ <code>Mountpoint</code>ëŠ” ìƒì„±í•œ ë³¼ë¥¨ì˜ ê²½ë¡œë¥¼ ì˜ë¯¸í•œë‹¤.</li></ul><h3 id=docker-hostì˜-ê²½ë¡œì™€-ì—°ê²°í•˜ê¸°>docker hostì˜ ê²½ë¡œì™€ ì—°ê²°í•˜ê¸°<a hidden class=anchor aria-hidden=true href=#docker-hostì˜-ê²½ë¡œì™€-ì—°ê²°í•˜ê¸°>#</a></h3><blockquote><p><strong><em>docker run -e POSTGRES_PASSWORD=mysecretpassword -v myvolume:/var/lib/postgresql/data -d postgres</em></strong></p></blockquote><p>myvolumeì„ postgresqlì˜ ë°ì´í„° ê²½ë¡œì™€ ì—°ê²°í•œë‹¤.</p><p>â—ï¸/var/lib/postgresql/data ëŠ” ë‚´ê°€ ì„ì˜ë¡œ ì •í•˜ëŠ” ê²Œ ì•„ë‹Œ RDBMSë§ˆë‹¤ ì •í•´ì ¸ìˆìœ¼ë¯€ë¡œ ë‹¤ë¥¸ ê²ƒì„ ì‚¬ìš©í•œë‹¤ë©´ ì¶”ê°€ë¡œ í™•ì¸í•´ì•¼í•œë‹¤.</p><h3 id=postgresql-ë°ì´í„°-ìƒì„±-ì»¨í…Œì´ë„ˆ-ì‚­ì œ-í›„-ì‹¤í–‰í•˜ì—¬-ë°ì´í„°-í™•ì¸í•˜ê¸°>postgresql ë°ì´í„° ìƒì„±, ì»¨í…Œì´ë„ˆ ì‚­ì œ í›„ ì‹¤í–‰í•˜ì—¬ ë°ì´í„° í™•ì¸í•˜ê¸°<a hidden class=anchor aria-hidden=true href=#postgresql-ë°ì´í„°-ìƒì„±-ì»¨í…Œì´ë„ˆ-ì‚­ì œ-í›„-ì‹¤í–‰í•˜ì—¬-ë°ì´í„°-í™•ì¸í•˜ê¸°>#</a></h3><ol><li>container ì ‘ì†: <code>docker exec -it &lt;postgresqlì— í•´ë‹¹ë˜ëŠ” container id></code></li><li>postgresql ì ‘ì†: <code>psql -U postgres</code></li><li>ì‚¬ìš©ì ì¶”ê°€: <code>CREATE USER jeha PASSWORD '1234' SUPERUSER;</code></li><li><code>\du</code>: ëª¨ë“  ì‚¬ìš©ì ë³´ì—¬ì£¼ê¸°</li><li><code>\q</code>: ë‚˜ì˜¤ê¸°</li><li>container ì¤‘ë‹¨: <code>docker container stop &lt;container id></code></li><li>container ì‚­ì œ: <code>docker container rm &lt;container id></code></li><li>ë‹¤ì‹œ postgresql ì‹¤í–‰í•˜ì—¬ ì ‘ì†í•œë‹¤.</li><li><code>\du</code>ë¡œ ë“±ë¡ëœ ì‚¬ìš©ìê°€ ì•„ì§ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸ í›„, exit</li></ol><hr><h1 id=3-dockerë¡œ-django-ë°°í¬í•˜ê¸°>3. Dockerë¡œ django ë°°í¬í•˜ê¸°<a hidden class=anchor aria-hidden=true href=#3-dockerë¡œ-django-ë°°í¬í•˜ê¸°>#</a></h1><h2 id=31-django-image-pull-ë°›ê³ -í™•ì¸í•˜ê¸°>3.1 Django image pull ë°›ê³  í™•ì¸í•˜ê¸°<a hidden class=anchor aria-hidden=true href=#31-django-image-pull-ë°›ê³ -í™•ì¸í•˜ê¸°>#</a></h2><ul><li>django image pull ë°›ê¸°: <code>docker pull django</code></li><li>django pull í•œ image í™•ì¸: <code>docker image ls</code></li></ul><h2 id=32-ì¥ê³ -ì»¨í…Œì´ë„ˆ-ê°€ë™>3.2 ì¥ê³  ì»¨í…Œì´ë„ˆ ê°€ë™<a hidden class=anchor aria-hidden=true href=#32-ì¥ê³ -ì»¨í…Œì´ë„ˆ-ê°€ë™>#</a></h2><h3 id=ë°°í¬ì‹œìŠ¤í…œ-êµ¬ì¡°-ì´í•´í•˜ê¸°>ë°°í¬ì‹œìŠ¤í…œ êµ¬ì¡° ì´í•´í•˜ê¸°<a hidden class=anchor aria-hidden=true href=#ë°°í¬ì‹œìŠ¤í…œ-êµ¬ì¡°-ì´í•´í•˜ê¸°>#</a></h3><blockquote><p><strong><em>ì„œë²„ í¬íŠ¸ì™€ ì»¨í…Œì´ë„ˆ í¬íŠ¸ ì—°ê²°í•˜ê¸°</em></strong></p></blockquote><ul><li><p>íŠ¸ë˜í”½ì€ ë°”ë¡œ ë“¤ì–´ì˜¤ëŠ” ê²Œ ì•„ë‹Œ, ì„œë²„ë¥¼ ê±°ì³ì„œ ì»¨í…Œì´ë„ˆë¡œ ë“¤ì–´ì˜¨ë‹¤. ì´ 2ë‹¨ê³„ê°€ í•„ìš”í•˜ë‹¤.</p></li><li><p>ìš°ë¦¬ê°€ ë¸Œë¼ìš°ì €ì˜ url ì°½ì— ë„ë©”ì¸ì„ ì…ë ¥í•˜ê³  ë‚˜ì„œ ì…ë ¥í•˜ëŠ” í¬íŠ¸ ë²ˆí˜¸ëŠ” ì»¨í…Œì´ë„ˆì˜ í¬íŠ¸ ë²ˆí˜¸ê°€ ì•„ë‹ˆë¼ &lsquo;ì„œë²„ì˜ í¬íŠ¸ ë²ˆí˜¸&rsquo;ë¥¼ ë§í•œë‹¤.</p></li><li><p>Port ë²ˆí˜¸</p><ul><li>ë‚´ê°€ ì‚¬ìš©í•˜ëŠ” í”„ë ˆì„ì›Œí¬ëŠ” django ì´ë¯€ë¡œ, port ë²ˆí˜¸ëŠ” 8000ì„ ì‚¬ìš©í•˜ê¸°ë¡œ í•œë‹¤.</li><li>HTTP portëŠ” 80ìœ¼ë¡œ ì •í•´ì ¸ìˆë‹¤.</li><li><code>www.naver.com</code> ì„ ì…ë ¥í•˜ëŠ” ê²ƒì€ <code>www.naver.com/:80</code> ì„ ì…ë ¥í•˜ëŠ” ê²ƒê³¼ ë™ì¼í•˜ë‹¤.</li></ul></li><li><p>ê·¸ë˜ì„œ 80 portë¥¼ ì§€ë‚œ í›„, 8000 portë¡œ ì˜¤ë„ë¡ ì—°ê²°í•´ì•¼ í•œë‹¤. ì´ë¥¼ ì„¤ê³„í•˜ì§€ ì•Šìœ¼ë©´ ì»¨í…Œì´ë„ˆë¥¼ ë„ì–´ë„ ì™¸ë¶€ì—ì„œ ì ‘ì†í•  ìˆ˜ ì—†ë‹¤.</p></li></ul><h3 id=ì¥ê³ -ì»¨í…Œì´ë„ˆ-ê°€ë™í•˜ê¸°>ì¥ê³  ì»¨í…Œì´ë„ˆ ê°€ë™í•˜ê¸°<a hidden class=anchor aria-hidden=true href=#ì¥ê³ -ì»¨í…Œì´ë„ˆ-ê°€ë™í•˜ê¸°>#</a></h3><blockquote><p>docker run -d -p 80:8000 django bash -c &ldquo;pip install django && django-admin startproject && cd && python manage.py runserver 0.0.0.0:8000&rdquo;</p></blockquote><ul><li><p><code>-d</code>: ë„ì»¤ ì»¨í…Œì´ë„ˆì˜ ë°±ê·¸ë¼ìš´ë“œ ì‹¤í–‰</p></li><li><p><code>-p 80:8000</code>: ì»¨í…Œì´ë„ˆ í¬íŠ¸ ì„¤ì • - í˜¸ìŠ¤íŠ¸ í¬íŠ¸: ì»¨í…Œì´ë„ˆ í¬íŠ¸</p><ul><li>ë‘ í¬íŠ¸ë¥¼ ì—°ê²°í•˜ê² ë‹¤ëŠ” ì˜ë¯¸</li></ul></li><li><p><code>bash</code>: ì»¨í…Œì´ë„ˆ ì‹¤í–‰ í›„, bash ì‹¤í–‰</p><ul><li>bashì— "" ì•ˆ ë‚´ìš©ì„ ì‹¤í–‰í•œë‹¤.</li><li>bashë¥¼ ì‚¬ìš©í•´ì„œ ì¥ê³  í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•œë‹¤.</li></ul></li><li><p><code>&&</code>: ì—°ê²°ì§€ì–´ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰í•œë‹¤.</p></li><li><p><code>python manage.py runserver 0.0.0.0:8000</code> ì—ì„œ ìœ„ì— <code>-p</code> ì˜µì…˜ìœ¼ë¡œ ì…ë ¥í•  í¬íŠ¸ë²ˆí˜¸ì™€ ì¼ì¹˜ì‹œì¼œì•¼ í•œë‹¤.</p></li><li><p>ë§Œì•½ í•´ë‹¹ í¬íŠ¸ê°€ ì´ë¯¸ ì‚¬ìš© ì¤‘ì´ë¼ê³  í•œë‹¤ë©´ <code>ps -ef | grep 8000</code>ì„ ì…ë ¥í•´ì„œ 8000ë²ˆì— ë¬´ì—‡ì´ ì‚¬ìš©ë˜ëŠ”ì§€ ì•Œ ìˆ˜ ìˆë‹¤.</p></li></ul><h3 id=-ì°¸ê³ ì‚¬í•­>ğŸ”† ì°¸ê³ ì‚¬í•­<a hidden class=anchor aria-hidden=true href=#-ì°¸ê³ ì‚¬í•­>#</a></h3><p>ë§Œì•½ <code>docker container ls</code>ë¥¼ ì…ë ¥í–ˆëŠ”ë° ì•„ë¬´ê²ƒë„ ì•ˆëœ¨ë©´ ìì„¸íˆ í™•ì¸í•˜ê¸° ìœ„í•´ì„œ <code>docker container ls -a</code> ë¥¼ ì…ë ¥í•˜ë©´ STATUSë¥¼ í†µí•´ í™•ì¸í•˜ë©´ <code>Exited</code>ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ê·¸ëŸ¬ë©´ ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¡œê·¸ë¥¼ í™•ì¸í•´ë³´ë©´ ì—ëŸ¬ ì›ì¸ì„ ë³´ë‹¤ ìì„¸íˆ ì•Œ ìˆ˜ ìˆìœ¼ë¯€ë¡œ í™œìš©í•˜ì.</p><ul><li>ë¡œê·¸ í™•ì¸: <code>docker logs &lt;container ID></code></li></ul><h3 id=error-starting-userland-proxy>â—ï¸Error starting userland proxy<a hidden class=anchor aria-hidden=true href=#error-starting-userland-proxy>#</a></h3><p>Error starting userland proxy: listen tcp4 0.0.0.0:80: bind: address already in use.</p><p><code>sudo netstat -nlptu | grep 80</code>ì„ ì…ë ¥í•´ë³´ì. ë§Œì•½ <code>command not found</code>ê°€ ëœ¬ë‹¤ë©´ <code>apt-get install net-tools</code>ë¥¼ ì…ë ¥í•˜ì—¬ ì„¤ì¹˜ í›„, ë‹¤ì‹œ ì‹¤í–‰í•´ë³´ì.</p><p>ê·¸ëŸ¬ë©´ 80 portë¥¼ ëˆ„ê°€ ì‚¬ìš© ì¤‘ì¸ì§€ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p><p>ë§Œì•½ ê·¸ í¬íŠ¸ë¥¼ ì‚¬ìš©í•˜ëŠ”ê²Œ nginx, apacheë¼ë©´ <code>sudo systemctl stop nginx</code> ë˜ëŠ” <code>sudo systemctl stop apache</code> ì„ ì…ë ¥í•˜ì—¬ ì¤‘ë‹¨í•˜ì.</p><p>ê·¸í›„ ë‹¤ì‹œ ì¥ê³  ì»¨í…Œì´ë„ˆ ê°€ë™í•˜ê¸° ìœ„í•œ ëª…ë ¹ì–´ <code>docker run -d -p 80:8000 ...</code>ì„ ì…ë ¥í•œë‹¤.</p><p>nginx, apacheê°€ ì•„ë‹ˆë¼ë©´ì„œ <code>sudo kill -9 &lt;PID></code> ë¥¼ ì…ë ¥í•œë‹¤.</p><h3 id=33-docker-container-ì •ì§€-ë°-ì¬ê°€ë™>3.3 docker container ì •ì§€ ë° ì¬ê°€ë™<a hidden class=anchor aria-hidden=true href=#33-docker-container-ì •ì§€-ë°-ì¬ê°€ë™>#</a></h3><ul><li><p>ì •ì§€: <code>docker container stop &lt;container ID></code></p></li><li><p>ì¬ê°€ë™</p><ul><li><code>docker container ls -a</code>ë¡œ ì •ì§€í–ˆì—ˆë˜ container idë¥¼ í™•ì¸</li><li>ë©ˆì¶°ìˆëŠ” ë„ì»¤ë¥¼ ì¬ì‹œì‘í•œë‹¤ëŠ” ì˜ë¯¸ì´ë¯€ë¡œ, <code>docker start &lt;container id></code>ë¥¼ ì…ë ¥</li></ul></li></ul><hr><h1 id=4-ì„œë²„ì—-ì¥ê³ -ì½”ë“œ-ë°°í¬í•˜ê¸°>4. ì„œë²„ì— ì¥ê³  ì½”ë“œ ë°°í¬í•˜ê¸°<a hidden class=anchor aria-hidden=true href=#4-ì„œë²„ì—-ì¥ê³ -ì½”ë“œ-ë°°í¬í•˜ê¸°>#</a></h1><h3 id=41-aws-ì™¸ë¶€-ì ‘ì†ì„-ìœ„í•œ-í¬íŠ¸-ì„¤ì •>4.1 AWS ì™¸ë¶€ ì ‘ì†ì„ ìœ„í•œ í¬íŠ¸ ì„¤ì •<a hidden class=anchor aria-hidden=true href=#41-aws-ì™¸ë¶€-ì ‘ì†ì„-ìœ„í•œ-í¬íŠ¸-ì„¤ì •>#</a></h3><ul><li>í•´ë‹¹ EC2ì˜ ì¸ë°”ìš´ë“œ ê·œì¹™ í¸ì§‘ì— ì‚¬ìš©ì ì§€ì • TCPë¡œ &lsquo;8000&rsquo;ì„ ì¶”ê°€í•œë‹¤.</li></ul><h3 id=42-ì¥ê³ -í”„ë¡œì íŠ¸-ìƒì„±-ë°-ê°€ë™>4.2 ì¥ê³  í”„ë¡œì íŠ¸ ìƒì„± ë° ê°€ë™<a hidden class=anchor aria-hidden=true href=#42-ì¥ê³ -í”„ë¡œì íŠ¸-ìƒì„±-ë°-ê°€ë™>#</a></h3><ul><li><p>root ê³„ì •ìœ¼ë¡œ ì´ë™: <code>sudo -i</code></p></li><li><p><code>work</code>ë¡œ ì´ë™</p></li><li><p><code>pyenv</code>ëŠ” ì•„ë˜ ë§í¬ë¥¼ ë”°ë¼ì„œ ì§„í–‰í•˜ì—¬ ì„¤ì¹˜ ë° í™œì„±í™”í•œë‹¤.</p><ul><li><a href=https://losskatsu.github.io/programming/pyenv/#5-%ED%8C%8C%EC%9D%B4%EC%8D%AC-%EA%B0%80%EC%83%81%ED%99%98%EA%B2%BD-%EC%84%A4%EC%B9%98>pyenvë¥¼ í†µí•œ íŒŒì´ì¬(python) ê°€ìƒí™˜ê²½ êµ¬ì¶•</a></li></ul></li><li><p>ê°€ìƒí™˜ê²½ ì‹¤í–‰: <code>pyenv activate &lt;ê°€ìƒí™˜ê²½ëª…></code></p><ul><li>pyenv ë§ê³ , ec2ì— ì„¤ì¹˜ëœ ê²Œ ìˆìœ¼ë©´ ê·¸ê²ƒìœ¼ë¡œ í•˜ë©´ ëœë‹¤.</li></ul></li><li><p>í”„ë¡œì íŠ¸ ëª…ì¹­: <code>django-admin startproject &lt;í”„ë¡œì íŠ¸ ëª…></code></p></li></ul><h3 id=43-ì¥ê³ -ì„¤ì •íŒŒì¼-ìˆ˜ì •-ë°-ì ‘ì†-í™•ì¸>4.3 ì¥ê³  ì„¤ì •íŒŒì¼ ìˆ˜ì • ë° ì ‘ì† í™•ì¸<a hidden class=anchor aria-hidden=true href=#43-ì¥ê³ -ì„¤ì •íŒŒì¼-ìˆ˜ì •-ë°-ì ‘ì†-í™•ì¸>#</a></h3><ul><li><p>settings.py ì—ì„œ ALLOWED_HOSTS ë¥¼ <code>['*']</code>ë¡œ ìˆ˜ì •í•œë‹¤. ì´ê²ƒì˜ ì˜ë¯¸ëŠ” ëª¨ë“  ì™¸ë¶€ ì ‘ì†ì„ í—ˆìš©í•œë‹¤ëŠ” ì˜ë¯¸ë‹¤.</p></li><li><p>ìˆ˜ì •í•  ë•Œì—ë§Œ <code>vim</code>ì„ ì‚¬ìš©í•˜ê³ , ê·¸ëƒ¥ ë³¼ ë•ŒëŠ” <code>cat</code>ë¥¼ ì‚¬ìš©í•œë‹¤.</p></li><li><p><code>python manage.py runserver 0:8000</code> ë¥¼ ì…ë ¥í•´ì•¼ ec2 ip ì£¼ì†Œë¥¼ ì‚¬ìš©í•´ì„œ <code>&lt;IP v4>:8000</code> ë¡œ ì ‘ì†í•  ìˆ˜ ìˆë‹¤.</p></li></ul><h2 id=-ë°œìƒí•œ-error>â—ï¸ ë°œìƒí•œ Error<a hidden class=anchor aria-hidden=true href=#-ë°œìƒí•œ-error>#</a></h2><blockquote><p><strong>_ModuleNotFoundError: No module named &lsquo;_sqlite3&rsquo; _</strong></p></blockquote><p>sqlite3ëŠ” íŒŒì´ì¬ ì„¤ì¹˜ ì‹œ, í¬í•¨ë˜ëŠ”ë° ìœ„ì™€ ê°™ì€ ì—ëŸ¬ëŠ” íŒŒì´ì¬ ì„¤ì¹˜ê°€ ì œëŒ€ë¡œ ì•ˆëœ ê²ƒì´ê¸° ë•Œë¬¸ì—,</p><p><code>pyenv install &lt;python version></code>ì„ ì…ë ¥í•˜ì—¬ ì„¤ì¹˜ë¥¼ ë‹¤ì‹œ í•œë‹¤.</p><hr><h1 id=5-ì§ì ‘-ì§ -ì½”ë“œ-containerë¡œ-ë°°í¬í•˜ê¸°>5. ì§ì ‘ ì§  ì½”ë“œ containerë¡œ ë°°í¬í•˜ê¸°<a hidden class=anchor aria-hidden=true href=#5-ì§ì ‘-ì§ -ì½”ë“œ-containerë¡œ-ë°°í¬í•˜ê¸°>#</a></h1><h2 id=51-ë””ë ‰í† ë¦¬-ì •ë¦¬-tree-ì„¤ì¹˜í•˜ì—¬-íŒŒì¼-êµ¬ì¡°-í™•ì¸í•˜ê¸°>5.1 ë””ë ‰í† ë¦¬ ì •ë¦¬, tree ì„¤ì¹˜í•˜ì—¬ íŒŒì¼ êµ¬ì¡° í™•ì¸í•˜ê¸°<a hidden class=anchor aria-hidden=true href=#51-ë””ë ‰í† ë¦¬-ì •ë¦¬-tree-ì„¤ì¹˜í•˜ì—¬-íŒŒì¼-êµ¬ì¡°-í™•ì¸í•˜ê¸°>#</a></h2><blockquote><p><strong><em>sudo apt-get install tree</em></strong></p></blockquote><p>ìœ„ ëª…ë ¹ì–´ ì‹¤í–‰ í›„, <code>tree ./</code>ë¡œ ì›í•˜ëŠ” ê²½ë¡œì˜ directiory êµ¬ì¡°ë¥¼ treeë¡œ í™•ì¸í•œë‹¤.</p><h2 id=52-requirementstxt-íŒŒì¼-ìƒì„±>5.2 requirements.txt íŒŒì¼ ìƒì„±<a hidden class=anchor aria-hidden=true href=#52-requirementstxt-íŒŒì¼-ìƒì„±>#</a></h2><ul><li><p>ì´ íŒŒì¼ ì¶”ê°€í•˜ëŠ” ì´ìœ ëŠ” ë‚˜ë§Œì˜ ë„ì»¤ ì´ë¯¸ì§€ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ django 4.1.1 layerë¥¼ ìŒ“ê¸° ìœ„í•´ì„œë‹¤.</p></li><li><p>ì™œëƒí•˜ë©´ ë„ì»¤ëŠ” ì—¬ëŸ¬ Layerê°€ ìŒ“ì—¬ì§„ ê²ƒì´ê¸° ë•Œë¬¸ì´ë‹¤.</p></li><li><p><code>vim requirements.txt</code>ë¥¼ ì‹¤í–‰í•˜ì—¬ ìƒì„±í•œë‹¤.</p><ul><li><code>django==4.1.1</code>ë¥¼ ì¶”ê°€í•œë‹¤.</li></ul></li></ul><h2 id=53-dockerfile-ìƒì„±í•˜ê¸°>5.3 Dockerfile ìƒì„±í•˜ê¸°<a hidden class=anchor aria-hidden=true href=#53-dockerfile-ìƒì„±í•˜ê¸°>#</a></h2><h3 id=dockerfile-ìƒì„±í•˜ê¸°>Dockerfile ìƒì„±í•˜ê¸°<a hidden class=anchor aria-hidden=true href=#dockerfile-ìƒì„±í•˜ê¸°>#</a></h3><ul><li><p>ìœ„ ì¥ê³  ê³¼ì •ì—ì„œ ì§ì ‘ í•˜ë‚˜í•˜ë‚˜ ì„¤ì¹˜í•˜ê³  ì‹¤í–‰í•œ ê±´ ë„ì»¤ ê°œë…ì„ ì´í•´í•˜ê¸° ìœ„í•´ì„œë‹¤.</p></li><li><p>requirements.txtë§Œ ì‹¤í–‰í•˜ë©´ ë°”ë¡œ ì„¤ì¹˜ëœë‹¤.</p></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span>FROM python:3.10.4
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>WORKDIR /usr/src/app
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>COPY . . 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>RUN python -m pip install -upgrade pip
</span></span><span style=display:flex><span>RUN pip install -r requirements.txt 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>WORKDIR ./practice
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>CMD python manage.py runserver 0:8000
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>EXPOSE 8000
</span></span></code></pre></div><ul><li><p>ì´ ë•Œ ìƒì„±í•´ì•¼í•˜ëŠ” Dockerfile ì´ë¦„ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p><ul><li><code>Dockerfile</code></li><li>ì£¼ì˜ì‚¬í•­: ì²« ê¸€ìê°€ ëŒ€ë¬¸ìì´ê³ , í™•ì¥ìê°€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤.</li></ul></li><li><p><code>FROM</code>: ê¸°ë³¸ layerë¥¼ ë¬´ì—‡ìœ¼ë¡œ í•  ê²ƒì¸ê°€?</p><ul><li><code>python:3.10.4</code>: ê¸°ë³¸ Layerë¥¼ ì´ê²ƒìœ¼ë¡œ í•œë‹¤.</li></ul></li><li><p>ì²« ë²ˆì§¸ <code>WOKDIR</code>: rootë¶€í„° ì‹œì‘í•˜ëŠ” container ë‚´ë¶€ ê²½ë¡œë¥¼ ì˜ë¯¸í•œë‹¤.</p></li><li><p><code>COPY . .</code>: ëª¨ë“  ê²ƒì„ ì»¨í…Œì´ë„ˆ ì•ˆìœ¼ë¡œ ê°€ì ¸ì˜¤ê² ë‹¤ëŠ” ì˜ë¯¸ë‹¤.</p></li><li><p><code>RUN</code>: ì˜¤ë¥¸ìª½ì— ì…ë ¥í•œ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ê² ë‹¤.</p></li><li><p>ë‘ ë²ˆì§¸ <code>WORKDIR</code>: ìœ„ì— RUN ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰ í›„, ì˜¤ë¥¸ìª½ì— ì…ë ¥í•œ ê²½ë¡œë¡œ ì´ë™í•œë‹¤.</p></li><li><p><code>EXPOSE</code>: ì»¨í…Œì´ë„ˆì— í¬íŠ¸ ëª‡ ë²ˆì„ ì—´ì§€ë¥¼ ì•Œë ¤ì£¼ëŠ” ê²ƒ</p></li></ul><h3 id=dockerfile-ì˜-file-level>Dockerfile ì˜ file level<a hidden class=anchor aria-hidden=true href=#dockerfile-ì˜-file-level>#</a></h3><p>Dockerfileê³¼ requirements.txtëŠ” ë™ì¼í•œ íŒŒì¼ levelì— ìˆì–´ì•¼ í•œë‹¤.</p><p><img loading=lazy src=https://user-images.githubusercontent.com/78094972/205901668-9b0a42b2-a803-4037-9d54-cbd8be15ac37.png alt=image></p><h2 id=54-image-build-í•˜ê¸°>5.4 image build í•˜ê¸°<a hidden class=anchor aria-hidden=true href=#54-image-build-í•˜ê¸°>#</a></h2><p><code>docker build . -t &lt;ë§Œë“¤ image ì´ë¦„></code></p><p>Dockerfileì´ ìˆëŠ” ìœ„ì¹˜ì—ì„œ ì‹¤í–‰í•œë‹¤.</p><ul><li><p><code>.</code>ì€ ìœ„ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ëŠ” ê²½ë¡œ ì•ˆì— ìˆëŠ” ëª¨ë“  ê±¸ ì˜ë¯¸í•œë‹¤.</p></li><li><p><code>-t</code>: íƒœê·¸ë¥¼ ì˜ë¯¸</p></li><li><p><code>docker image ls</code>ë¥¼ ì…ë ¥í•˜ë©´ ëª©ë¡ì— ìœ„ì— ì…ë ¥í•œ image ì´ë¦„ìœ¼ë¡œ ì¡´ì¬í•˜ëŠ” ê±¸ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p></li></ul><p>â—ï¸ ì»¨í…Œì´ë„ˆëŠ” ìš´ì˜ì²´ì œê°€ ì•„ë‹ˆê¸° ë•Œë¬¸ì—, root User ê´€ë ¨ ê²½ê³ ëŠ” ë¬¸ì œê°€ ì•„ë‹ˆë‹¤.
â—ï¸ ë§Œì•½ imageë¥¼ ë¹Œë“œ í›„, Dockerfileì„ ìˆ˜ì •í•˜ë©´ ë‹¤ì‹œ imageë¥¼ ë§Œë“¤ì–´ì•¼ í•œë‹¤.</p><h3 id=ë¹Œë“œí•œ-ì´ë¯¸ì§€-ì‹¤í–‰í•˜ì—¬-ì»¨í…Œì´ë„ˆ-ê°€ë™>ë¹Œë“œí•œ ì´ë¯¸ì§€ ì‹¤í–‰í•˜ì—¬ ì»¨í…Œì´ë„ˆ ê°€ë™<a hidden class=anchor aria-hidden=true href=#ë¹Œë“œí•œ-ì´ë¯¸ì§€-ì‹¤í–‰í•˜ì—¬-ì»¨í…Œì´ë„ˆ-ê°€ë™>#</a></h3><p><code>docker run -d -p 80:8000 &lt;ë§Œë“  image ì´ë¦„></code></p><p>ìœ„ ëª…ë ¹ì–´ ì‹¤í–‰ í›„, <code>docker container ls</code>ë¥¼ ì…ë ¥í•˜ë©´ ê°€ë™ë˜ê³  ìˆëŠ” containerë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p><p>â—ï¸ ìœ„ ëª…ë ¹ì–´ë¡œ container idê°€ ë–´ìŒì—ë„ ë¶ˆêµ¬í•˜ê³ , <code>docker container ls -a</code>ë¡œ í•´ë‹¹ container idì˜ statusê°€ <code>exited</code> ì´ë©´ <code>docker logs &lt;container id></code>ë¡œ ì›ì¸ì„ íŒŒì•…í•œë‹¤.</p><hr><h1 id=6-dockerë¡œ-nginx-ë°°í¬í•˜ê¸°>6. dockerë¡œ nginx ë°°í¬í•˜ê¸°<a hidden class=anchor aria-hidden=true href=#6-dockerë¡œ-nginx-ë°°í¬í•˜ê¸°>#</a></h1><p>djangoë§Œìœ¼ë¡œëŠ” trafficì„ ë°›ì„ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì—, nginxë¥¼ ì„¤ì¹˜í•´ì•¼í•œë‹¤.</p><h2 id=61-nginx-ë””ë ‰í† ë¦¬-ìƒì„±>6.1 nginx ë””ë ‰í† ë¦¬ ìƒì„±<a hidden class=anchor aria-hidden=true href=#61-nginx-ë””ë ‰í† ë¦¬-ìƒì„±>#</a></h2><p><code>mkdir nginxtest</code> ìƒì„±</p><h2 id=62-dockerfile-ìƒì„±>6.2 Dockerfile ìƒì„±<a hidden class=anchor aria-hidden=true href=#62-dockerfile-ìƒì„±>#</a></h2><ul><li>ìœ„ì— ìƒì„±í•œ ë””ë ‰í† ë¦¬ë¡œ ì´ë™ í›„, <code>vim Dockerfile</code>ë¡œ ìƒì„±í•˜ì—¬ ì•„ë˜ ë‚´ìš©ì„ ì…ë ¥í•œë‹¤.</li></ul><p>â—ï¸ ì…ë ¥ ì‹œ, í™€ë”°ì˜´í‘œê°€ ì•„ë‹Œ ìŒë”°ì˜´í‘œë¥¼ ì‚¬ìš©í•œë‹¤.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span>FROM nginx
</span></span><span style=display:flex><span>CMD [&#34;nginx&#34;, &#34;-g&#34;, &#34;daemon off;&#34;]
</span></span></code></pre></div><ul><li><code>daemon off</code>ì˜ ì˜ë¯¸<ul><li>nginxë¥¼ foregroundë¡œ ëŒë¦¬ê¸° ìœ„í•¨</li><li>containerê°€ backgroundë¡œ ì‹¤í–‰ë˜ë¯€ë¡œ, nginxë¥¼ foregroundë¡œ ëŒë¦¬ì§€ ì•Šìœ¼ë©´ nginxê°€ exitedëœë‹¤.</li></ul></li></ul><h3 id=file-level>file level<a hidden class=anchor aria-hidden=true href=#file-level>#</a></h3><p><img loading=lazy src=https://user-images.githubusercontent.com/78094972/205932391-12e25d2c-19cc-4a0e-8c49-299f69e035f8.png alt=image></p><h2 id=63-image-build-ë°-í™•ì¸>6.3 image build ë° í™•ì¸<a hidden class=anchor aria-hidden=true href=#63-image-build-ë°-í™•ì¸>#</a></h2><h3 id=image-build>image build<a hidden class=anchor aria-hidden=true href=#image-build>#</a></h3><p>Dockerfileì´ ìˆëŠ” ê²½ë¡œì—ì„œ ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•œë‹¤.</p><p><code>docker build . -t nginx-test</code></p><h3 id=image-í™•ì¸>image í™•ì¸<a hidden class=anchor aria-hidden=true href=#image-í™•ì¸>#</a></h3><p><code>docker image ls</code>ë¥¼ ì‹¤í–‰í•˜ì—¬ ëª©ë¡ì„ í™•ì¸í•œë‹¤. ì´ ë•Œ ê²½ë¡œëŠ” ìƒê´€ì—†ë‹¤.</p><h2 id=64-nginx-container-ê°€ë™>6.4 nginx container ê°€ë™<a hidden class=anchor aria-hidden=true href=#64-nginx-container-ê°€ë™>#</a></h2><h3 id=container-ê°€ë™>container ê°€ë™<a hidden class=anchor aria-hidden=true href=#container-ê°€ë™>#</a></h3><p><code>docker run -d nginx-test</code></p><h3 id=ëª©ë¡-í™•ì¸>ëª©ë¡ í™•ì¸<a hidden class=anchor aria-hidden=true href=#ëª©ë¡-í™•ì¸>#</a></h3><p><code>docker container ls</code></p><hr><h1 id=7-docker-composeë¡œ-ì¥ê³ ì™€-nginx-í•¨ê»˜-ë°°í¬í•˜ê¸°>7. Docker composeë¡œ ì¥ê³ ì™€ nginx í•¨ê»˜ ë°°í¬í•˜ê¸°<a hidden class=anchor aria-hidden=true href=#7-docker-composeë¡œ-ì¥ê³ ì™€-nginx-í•¨ê»˜-ë°°í¬í•˜ê¸°>#</a></h1><p><img loading=lazy src=https://user-images.githubusercontent.com/78094972/206096399-d5734708-c12b-499e-a8a4-f83905ea371c.png alt=image></p><p>ìœ„ ì´ë¯¸ì§€ì²˜ëŸ¼ ì»¨í…Œì´ë„ˆ ë‘ ê°œë¥¼ ì—°ê²°í•˜ë ¤ê³  í•œë‹¤.</p><ul><li>ì„œë²„ ì™¸ë¶€ì—ì„œ 80í¬íŠ¸ë¡œ ë“¤ì–´ì˜¤ë©´ nginxë¡œ ì´ë™í•˜ë©´ django-test 8000 portë¡œ ì´ë™ë˜ë„ë¡ í•œë‹¤.</li></ul><p>nginx: ì„œë²„ ì™€ django: ì›¹ ì„œë²„ë¥¼ ì—°ê²°í•˜ê¸° ìœ„í•´ì„œ gunicornì„ ì‚¬ìš©í•´ë³¼ ì˜ˆì •ì´ë‹¤.</p><p>ì´ë¥¼ ìœ„í•´ì„œ docker composeë¥¼ ì‚¬ìš©í•´ë³´ì.</p><h2 id=71-docker-compose-ê°œë…--ì„¤ì¹˜>7.1 Docker compose ê°œë… & ì„¤ì¹˜<a hidden class=anchor aria-hidden=true href=#71-docker-compose-ê°œë…--ì„¤ì¹˜>#</a></h2><h3 id=docker-compose-concept>Docker compose concept<a hidden class=anchor aria-hidden=true href=#docker-compose-concept>#</a></h3><p>djangoê³¼ nginxë¥¼ ì—°ê²°í•˜ëŠ”ë°, ë§ì€ ì»¨í…Œì´ë„ˆë¥¼ í•˜ë‚˜ í•˜ë‚˜ ì§ì ‘ ì—°ê²°í•˜ëŠ” ê±´ ë§¤ìš° ì‹œê°„ì´ ë§ì´ ê±¸ë¦°ë‹¤.</p><p>ë„ì»¤ íŒŒì¼ì€ &lsquo;í•˜ë‚˜ì˜ ì»¨í…Œì´ë„ˆ&rsquo; ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•œ íŒŒì¼ì´ë‹¤.</p><p>í•˜ì§€ë§Œ, <strong>ë„ì»¤ ì»´í¬ì¦ˆëŠ” &lsquo;ì—¬ëŸ¬ ê°œì˜ ì»¨í…Œì´ë„ˆ&rsquo;ë¥¼ ê´€ë¦¬í•˜ëŠ” ë„ì»¤ ì• í”Œë¦¬ì¼€ì´ì…˜</strong>ì´ë‹¤.</p><p>ë„ì»¤ ì»´í¬ì¦ˆë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” docker-compose.ymlì´ë¼ëŠ” YAML íŒŒì¼ì„ ì‚¬ìš©í•œë‹¤.</p><h3 id=yaml>YAML<a hidden class=anchor aria-hidden=true href=#yaml>#</a></h3><ul><li><p>YAMLì€ ë§ˆí¬ì—… ì–¸ì–´ê°€ ì•„ë‹ˆë‹¤.</p></li><li><p>ê¸°ì¡´ JSONì˜ ë¶ˆí¸í•¨ì„ í•´ì†Œí•˜ê¸° ìœ„í•´ ë§Œë“¤ì–´ì§„ ì–¸ì–´</p></li><li><p>ì£¼ë¡œ ì„¤ì • íŒŒì¼(configuration file)ì— ì‚¬ìš©</p></li><li><p>í™•ì¥ì: *.yml</p></li></ul><h2 id=72-docker-compose-installation>7.2 Docker compose installation<a hidden class=anchor aria-hidden=true href=#72-docker-compose-installation>#</a></h2><p><a href=https://docs.docker.com/compose/install/linux/#install-the-plugin-manually>docs.docker.com - install the plugin manually</a>ë¥¼ ë³´ê³  ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ì…ë ¥í•œë‹¤.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span>mkdir -p ~/.docker/cli-plugins
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>curl -SL https://github.com/docker/compose/releases/download/v2.14.0/docker-compose-linux-x86_64 -o ~/.docker/cli-plugins/docker-compose
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>chmod +x ~/.docker/cli-plugins/docker-compose
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>docker compose version
</span></span></code></pre></div><h3 id=-error>â—ï¸ Error<a hidden class=anchor aria-hidden=true href=#-error>#</a></h3><blockquote><p><strong><em>docker: &lsquo;compose&rsquo; is not a docker command</em></strong></p></blockquote><p>curl -o ë’¤ì— ê²½ë¡œì™€ mkdirì˜ ê²½ë¡œê°€ ì¼ì¹˜í•œì§€ í™•ì¸í•˜ê¸°</p><h2 id=73-directory-ì •ë¦¬>7.3 directory ì •ë¦¬<a hidden class=anchor aria-hidden=true href=#73-directory-ì •ë¦¬>#</a></h2><p>ë‹¤ìŒê³¼ ê°™ì´ ê²½ë¡œë¥¼ ìˆ˜ì •í•œë‹¤.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span>./
</span></span><span style=display:flex><span>â”œâ”€â”€ django
</span></span><span style=display:flex><span>â”‚Â Â  â”œâ”€â”€ Devket
</span></span><span style=display:flex><span>â”‚Â Â  â”‚Â Â  â”œâ”€â”€ config
</span></span><span style=display:flex><span>â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ __init__.py
</span></span><span style=display:flex><span>â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ __pycache__
</span></span><span style=display:flex><span>â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ __init__.cpython-310.pyc
</span></span><span style=display:flex><span>â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ settings.cpython-310.pyc
</span></span><span style=display:flex><span>â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ urls.cpython-310.pyc
</span></span><span style=display:flex><span>â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ wsgi.cpython-310.pyc
</span></span><span style=display:flex><span>â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ asgi.py
</span></span><span style=display:flex><span>â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ settings.py
</span></span><span style=display:flex><span>â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ urls.py
</span></span><span style=display:flex><span>â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ wsgi.py
</span></span><span style=display:flex><span>â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ ~
</span></span><span style=display:flex><span>â”‚Â Â  â”‚Â Â  â”œâ”€â”€ db.sqlite3
</span></span><span style=display:flex><span>â”‚Â Â  â”‚Â Â  â””â”€â”€ manage.py
</span></span><span style=display:flex><span>â”‚Â Â  â”œâ”€â”€ Dockerfile
</span></span><span style=display:flex><span>â”‚Â Â  â””â”€â”€ requirements.txt
</span></span><span style=display:flex><span>â””â”€â”€ nginx
</span></span><span style=display:flex><span>    â””â”€â”€ Dockerfile
</span></span></code></pre></div><h2 id=74-dockerfile-ìˆ˜ì •>7.4 Dockerfile ìˆ˜ì •<a hidden class=anchor aria-hidden=true href=#74-dockerfile-ìˆ˜ì •>#</a></h2><h3 id=django-directory-ì•ˆì—-ìˆëŠ”-dockerfile-ìˆ˜ì •>django directory ì•ˆì— ìˆëŠ” dockerfile ìˆ˜ì •<a hidden class=anchor aria-hidden=true href=#django-directory-ì•ˆì—-ìˆëŠ”-dockerfile-ìˆ˜ì •>#</a></h3><p>ì²« ë²ˆì§¸ <code>CMD</code> ë’¤ì— ë‹¤ë¥¸ <code>CMD</code>ë¥¼ ì¶”ê°€í•œë‹¤.</p><p><code>CMD gunicorn config.wsgi:application --bind 0.0.0.0:8000</code></p><h3 id=nginx-directory-ì•ˆì—-ìˆëŠ”-dockerfile-ìˆ˜ì •>nginx directory ì•ˆì— ìˆëŠ” dockerfile ìˆ˜ì •<a hidden class=anchor aria-hidden=true href=#nginx-directory-ì•ˆì—-ìˆëŠ”-dockerfile-ìˆ˜ì •>#</a></h3><p>ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜ì •í•œë‹¤.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span>FROM nginx
</span></span><span style=display:flex><span>RUN rm /etc/nginx/conf.d/default.conf
</span></span><span style=display:flex><span>COPY default.conf /etc/nginx/conf.d
</span></span><span style=display:flex><span>CMD [&#34;nginx&#34;, &#34;-g&#34;, &#34;daemon off;&#34;]
</span></span></code></pre></div><ul><li>ê¸°ì¡´ ì»¨í…Œì´ë„ˆì— ìˆë˜ default.confë¥¼ ì‚­ì œí•˜ê³ , ìƒˆë¡œìš´ default.confë¥¼ ê¸°ì¡´ì— ìˆë˜ ê²½ë¡œì— ë§Œë“¤ê² ë‹¤ëŠ” ì˜ë¯¸ë‹¤.</li></ul><h2 id=75-nginxì—-defaultconf-ì¶”ê°€>7.5 nginxì— default.conf ì¶”ê°€<a hidden class=anchor aria-hidden=true href=#75-nginxì—-defaultconf-ì¶”ê°€>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span>server {
</span></span><span style=display:flex><span>	listen 80;
</span></span><span style=display:flex><span>	server_name localhost;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	location /{
</span></span><span style=display:flex><span>		proxy_pass http://&lt;nginxì— ì—°ê²°í•  image ì´ë¦„&gt;:8000;
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ul><li><code>listen 80 </code>: ì„œë²„ë¡œë¶€í„° ë“¤ì–´ì˜¤ëŠ” ê²ƒì„ 80 portë¡œ ë°›ê² ë‹¤ëŠ” ì˜ë¯¸</li><li><code>proxy_pass</code>: 80 portë¡œ ë“¤ì–´ì˜¨ ê²ƒì„ 8000 portë¡œ ëŒë¦¬ê² ë‹¤ëŠ” ì˜ë¯¸</li></ul><h2 id=76-docker-composeyml>7.6 docker-compose.yml<a hidden class=anchor aria-hidden=true href=#76-docker-composeyml>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#6272a4># docker-compose.ymlì´ ìˆëŠ” ê²½ë¡œ: ~/test</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>version</span>: <span style=color:#f1fa8c>&#34;3&#34;</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>services</span>:
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>&lt;ì²« ë²ˆì§¸ service name&gt;</span>:
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>build</span>: ./&lt;django Dockerfileì´ ìˆëŠ” directory name&gt;
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>container_name</span>: &lt;ìƒì„±ë  image name&gt;
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>restart</span>: always
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>expose</span>: 
</span></span><span style=display:flex><span>            - <span style=color:#f1fa8c>&#34;8000&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>&lt;ë‘ ë²ˆì§¸ service name&gt;</span>:
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>build</span>: ./&lt;nginx Dockerfileì´ ìˆëŠ” directory&gt;
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>container_name</span>: &lt;ìƒì„±ë  image name&gt;
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>restart</span>: always 
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>ports</span>: 
</span></span><span style=display:flex><span>          - <span style=color:#f1fa8c>&#34;80:80&#34;</span> 
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>depends_on</span>: 
</span></span><span style=display:flex><span>          - &lt;ì²« ë²ˆì§¸ service name&gt;
</span></span></code></pre></div><ul><li><code>version</code>: versionì— ë”°ë¼ ì°¸ê³ í•˜ëŠ” ê·œê²©ì´ ë‹¬ë¼ì§„ë‹¤.<ul><li><a href=https://docs.docker.com/compose/compose-file/compose-versioning/#version-3>About versions and upgrading</a></li></ul></li><li><code>services</code> ë°‘ì— ë°”ë¡œ ì˜¤ëŠ” ê²ƒì€ ì—¬ëŸ¬ ì„œë¹„ìŠ¤ ëª…ì¹­ë“¤ì„ ì˜ë¯¸</li><li><code>expose</code>: container ìƒì— ëª‡ ë²ˆ í¬íŠ¸ë¥¼ ì—´ì§€ ì§€ì •</li><li><code>ports</code>: ì„œë²„ì—ì„œ ë“¤ì–´ì™€ ë°”ë¡œ ë°›ê¸° ë•Œë¬¸ì— ì…ë ¥í•´ì•¼ í•œë‹¤.</li><li><code>depends_on</code>: service ê°„ ê´€ê³„ì„±ì„ ì§€ì •í•˜ëŠ” í‚¤ì›Œë“œë¡œì„œ, ì‹¤í–‰ ìˆœì„œë¥¼ ì •í•˜ëŠ” í‚¤ì›Œë“œë¡œ depends_onì— ìˆëŠ” serviceë¥¼ ì‹¤í–‰í•œ í›„, í•´ë‹¹ serviceë¥¼ ì‹¤í–‰</li><li>ìƒì„±ë  image nameì€ í˜„ì¬ <code>test</code> ê²½ë¡œì—ì„œ ì‹¤í–‰ë˜ì—ˆê¸° ë•Œ ë¬¸ì—, <code>test-&lt;ìƒì„±ë  image name></code>ìœ¼ë¡œ imageê°€ ìƒì„±ëœë‹¤.</li></ul><h2 id=77-docker-compose-ì‹¤í–‰-ë°-ë‚´ë¦¬ê¸°>7.7 docker compose ì‹¤í–‰ ë° ë‚´ë¦¬ê¸°<a hidden class=anchor aria-hidden=true href=#77-docker-compose-ì‹¤í–‰-ë°-ë‚´ë¦¬ê¸°>#</a></h2><ul><li>docker compose ì‹¤í–‰í•˜ê¸°: <code>docker compose up -d --build</code></li><li>docker compose ë‚´ë¦¬ê¸°: <code>docker compose down</code></li></ul><hr><h1 id=8-ë„ì»¤ë¡œ-ì¥ê³ -nginx-postgresql-í•¨ê»˜-ë°°í¬í•˜ê¸°>8. ë„ì»¤ë¡œ ì¥ê³ , nginx, PostgreSQL í•¨ê»˜ ë°°í¬í•˜ê¸°<a hidden class=anchor aria-hidden=true href=#8-ë„ì»¤ë¡œ-ì¥ê³ -nginx-postgresql-í•¨ê»˜-ë°°í¬í•˜ê¸°>#</a></h1><p>ì „ì²´ì ì¸ ì„œë²„ êµ¬ì„±ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p><p><img loading=lazy src=https://user-images.githubusercontent.com/78094972/206230297-44fc1f1a-226e-4173-8e4d-3bbaf88c1764.png alt=image></p><p>ê·¸ë¦¬ê³ , ì»¨í…Œì´ë„ˆì˜ ê´€ì ì—ì„œ ë°”ë¼ë³´ë©´ ì „ì²´ì ì¸ êµ¬ì„±ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p><p><img loading=lazy src=https://user-images.githubusercontent.com/78094972/206230121-50f10a96-878f-4fc1-8f32-acdd353b61ba.png alt=image></p><h3 id=gunicornì„-ì„ íƒí•œ-ì´ìœ >gunicornì„ ì„ íƒí•œ ì´ìœ <a hidden class=anchor aria-hidden=true href=#gunicornì„-ì„ íƒí•œ-ì´ìœ >#</a></h3><p>gunicornì„ ì‚¬ìš©í•œ ì´ìœ ëŠ” í˜„ì¬ ê³¼ì •ì—ì„œëŠ” ë¹ ë¥¸ ì†ë„ê°€ ë¶ˆí•„ìš”í•˜ê¸° ë•Œë¬¸ì´ë‹¤. ë¹ ë¥¸ ì†ë„ê°€ ë¹ ë¥¸ ì„±ëŠ¥ì´ í•„ìš”í•˜ë©´ wsgië¥¼ ì“´ë‹¤.</p><h2 id=81-file-directory-êµ¬ì¡°>8.1 file directory êµ¬ì¡°<a hidden class=anchor aria-hidden=true href=#81-file-directory-êµ¬ì¡°>#</a></h2><ul><li><p>django, nginx, psqlì´ docker-compose.ymlê³¼ ë™ì¼í•œ file levelì´ì–´ì•¼ í•œë‹¤.</p></li><li><p>ê·¸ë¦¬ê³  django, nginx, psqlì—ëŠ” ê° í•´ë‹¹ë˜ëŠ” Dockerfileì´ ì¡´ì¬í•´ì•¼í•œë‹¤.</p></li><li><p>djangoì—ëŠ” requirements.txtê°€, nginxì—ëŠ” default.confê°€ ì¶”ê°€ë¡œ ì¡´ì¬í•´ì•¼ í•œë‹¤.</p></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span>./
</span></span><span style=display:flex><span>â”œâ”€â”€ django
</span></span><span style=display:flex><span>â”‚Â Â  â”œâ”€â”€ Devket
</span></span><span style=display:flex><span>â”‚Â Â  â”‚Â Â  â”œâ”€â”€ config
</span></span><span style=display:flex><span>â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ __init__.py
</span></span><span style=display:flex><span>â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ __pycache__
</span></span><span style=display:flex><span>â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ __init__.cpython-310.pyc
</span></span><span style=display:flex><span>â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ settings.cpython-310.pyc
</span></span><span style=display:flex><span>â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ urls.cpython-310.pyc
</span></span><span style=display:flex><span>â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ wsgi.cpython-310.pyc
</span></span><span style=display:flex><span>â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ asgi.py
</span></span><span style=display:flex><span>â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ settings.py
</span></span><span style=display:flex><span>â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ urls.py
</span></span><span style=display:flex><span>â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ wsgi.py
</span></span><span style=display:flex><span>â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ ~
</span></span><span style=display:flex><span>â”‚Â Â  â”‚Â Â  â”œâ”€â”€ db.sqlite3
</span></span><span style=display:flex><span>â”‚Â Â  â”‚Â Â  â””â”€â”€ manage.py
</span></span><span style=display:flex><span>â”‚Â Â  â”œâ”€â”€ Dockerfile
</span></span><span style=display:flex><span>â”‚Â Â  â””â”€â”€ requirements.txt
</span></span><span style=display:flex><span>â”œâ”€â”€ docker-compose.yml
</span></span><span style=display:flex><span>â”œâ”€â”€ nginx
</span></span><span style=display:flex><span>â”‚Â Â  â”œâ”€â”€ Dockerfile
</span></span><span style=display:flex><span>â”‚Â Â  â””â”€â”€ default.conf
</span></span><span style=display:flex><span>â””â”€â”€ psql
</span></span><span style=display:flex><span>    â””â”€â”€ Dockerfile
</span></span></code></pre></div><h2 id=82-docker-composeyml-ìˆ˜ì •í•˜ê¸°>8.2 docker-compose.yml ìˆ˜ì •í•˜ê¸°<a hidden class=anchor aria-hidden=true href=#82-docker-composeyml-ìˆ˜ì •í•˜ê¸°>#</a></h2><p>DB ì¶”ê°€ì— ë”°ë¥¸ docker-compose.ymlì€ ë‹¤ìŒ ë‚´ìš©ì´ ì¶”ê°€ëœë‹¤.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#ff79c6>version</span>: <span style=color:#f1fa8c>&#34;3&#34;</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>services</span>:
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    ...
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>psql</span>:
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>build</span>: ./psql
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>container_name</span>: psql
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>restart</span>: always
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>volumes</span>:
</span></span><span style=display:flex><span>          - myvolume:var/lib/postgresql/data
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>environment</span>:
</span></span><span style=display:flex><span>          - POSTGRES_USER=postgres
</span></span><span style=display:flex><span>          - POSTGRES_PASSWORD=postgres
</span></span><span style=display:flex><span>          - POSTGRES_DB=postgres
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>volumes</span>:
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>myvolume</span>:
</span></span></code></pre></div><ul><li>psql-testì—ëŠ” dbì´ê¸° ë•Œë¬¸ì— volumeì´ ì¶”ê°€ëœ ê±¸ ì•Œ ìˆ˜ ìˆë‹¤.</li></ul><p>â—ï¸ ë§Œì•½ ìš©ëŸ‰ ë¶€ì¡± errorê°€ ëœ° ê²½ìš° <code>docker system prune --volumes</code> ëª…ë ¹ì–´ë¥¼ ìƒìš©í•´ë³´ì.</p><h2 id=83-django-settingspyì˜-db-ì„¤ì •-ë³€ê²½í•˜ê¸°>8.3 django settings.pyì˜ DB ì„¤ì • ë³€ê²½í•˜ê¸°<a hidden class=anchor aria-hidden=true href=#83-django-settingspyì˜-db-ì„¤ì •-ë³€ê²½í•˜ê¸°>#</a></h2><p>django applicationì˜ settings.pyì˜ DATEBASES í™˜ê²½ ë³€ìˆ˜ë¥¼ ìˆ˜ì •í•œë‹¤.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#6272a4># before</span>
</span></span><span style=display:flex><span>DATABASES <span style=color:#ff79c6>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#39;default&#39;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#f1fa8c>&#39;ENGINE&#39;</span>: <span style=color:#f1fa8c>&#39;django.db.backends.sqlite3&#39;</span>,
</span></span><span style=display:flex><span>        <span style=color:#f1fa8c>&#39;NAME&#39;</span>: BASE_DIR <span style=color:#ff79c6>/</span> <span style=color:#f1fa8c>&#39;db.sqlite3&#39;</span>,
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6272a4># after</span>
</span></span><span style=display:flex><span>DATABASES <span style=color:#ff79c6>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#39;default&#39;</span>: {
</span></span><span style=display:flex><span>        <span style=color:#f1fa8c>&#39;ENGINE&#39;</span>: <span style=color:#f1fa8c>&#39;django.db.backends.postgresql&#39;</span>,
</span></span><span style=display:flex><span>        <span style=color:#f1fa8c>&#39;NAME&#39;</span>: <span style=color:#f1fa8c>&#39;postgres&#39;</span>,
</span></span><span style=display:flex><span>        <span style=color:#f1fa8c>&#39;USER&#39;</span>: <span style=color:#f1fa8c>&#39;postgres&#39;</span>,
</span></span><span style=display:flex><span>        <span style=color:#f1fa8c>&#39;PASSWORD&#39;</span>: <span style=color:#f1fa8c>&#39;postgres&#39;</span>,
</span></span><span style=display:flex><span>        <span style=color:#f1fa8c>&#39;HOST&#39;</span>: <span style=color:#f1fa8c>&#39;db-test&#39;</span>,
</span></span><span style=display:flex><span>        <span style=color:#f1fa8c>&#39;PORT&#39;</span>: <span style=color:#bd93f9>5432</span>,
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=84-requirements-ë³€ê²½-í›„-compose-ì‹¤í–‰í•˜ê¸°>8.4 requirements ë³€ê²½ í›„, compose ì‹¤í–‰í•˜ê¸°<a hidden class=anchor aria-hidden=true href=#84-requirements-ë³€ê²½-í›„-compose-ì‹¤í–‰í•˜ê¸°>#</a></h2><ul><li>requirements.txtì— <code>psycopg2</code>ë¥¼ ì¶”ê°€</li><li>compose ì‹¤í–‰: <code>docker compose up -d --build</code></li></ul><h3 id=-error-01>â—ï¸ Error 01<a hidden class=anchor aria-hidden=true href=#-error-01>#</a></h3><p>invalid mount config for type &ldquo;volume&rdquo;: invalid mount path: &lsquo;var/lib/postgresql/data&rsquo; mount path must be absolute</p><p>&lsquo;var/lib/postgresql/data&rsquo; ì•ì— <code>/</code>ê°€ ì—†ì–´ì„œ ìƒê¸´ ë¬¸ì œë‹¤.</p><h3 id=-error-02>â—ï¸ Error 02<a hidden class=anchor aria-hidden=true href=#-error-02>#</a></h3><p>strconv.Atoi: parsing &ldquo;&rdquo;: invalid syntax</p><p><code>sudo docker system prune</code>ì„ ì‹¤í–‰í•œë‹¤.</p><hr><h1 id=reference>Reference<a hidden class=anchor aria-hidden=true href=#reference>#</a></h1><ul><li><a href=https://learningspoons.com/course/detail/django-backend/>ëŸ¬ë‹ìŠ¤í‘¼ì¦ˆ - ë‚˜ë…¸ë””ê·¸ë¦¬ Python & Django backed course</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=http://jeha00.github.io/tags/docker/>docker</a></li></ul><nav class=paginav><a class=next href=http://jeha00.github.io/post/docker/00_docker-commands-02/><span class=title>Next Page Â»</span><br><span>Docker study: Docker command list 02</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share Docker study: Docker-composeë¡œ nginx, django, postgreSQLì„ ì—°ê²°í•˜ê³  ë°°í¬í•˜ê¸° on twitter" href="https://twitter.com/intent/tweet/?text=Docker%20study%3a%20Docker-compose%eb%a1%9c%20nginx%2c%20django%2c%20postgreSQL%ec%9d%84%20%ec%97%b0%ea%b2%b0%ed%95%98%ea%b3%a0%20%eb%b0%b0%ed%8f%ac%ed%95%98%ea%b8%b0&url=http%3a%2f%2fjeha00.github.io%2fpost%2fdocker%2f04_deployment-by-docker%2f&hashtags=docker"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Docker study: Docker-composeë¡œ nginx, django, postgreSQLì„ ì—°ê²°í•˜ê³  ë°°í¬í•˜ê¸° on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=http%3a%2f%2fjeha00.github.io%2fpost%2fdocker%2f04_deployment-by-docker%2f&title=Docker%20study%3a%20Docker-compose%eb%a1%9c%20nginx%2c%20django%2c%20postgreSQL%ec%9d%84%20%ec%97%b0%ea%b2%b0%ed%95%98%ea%b3%a0%20%eb%b0%b0%ed%8f%ac%ed%95%98%ea%b8%b0&summary=Docker%20study%3a%20Docker-compose%eb%a1%9c%20nginx%2c%20django%2c%20postgreSQL%ec%9d%84%20%ec%97%b0%ea%b2%b0%ed%95%98%ea%b3%a0%20%eb%b0%b0%ed%8f%ac%ed%95%98%ea%b8%b0&source=http%3a%2f%2fjeha00.github.io%2fpost%2fdocker%2f04_deployment-by-docker%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Docker study: Docker-composeë¡œ nginx, django, postgreSQLì„ ì—°ê²°í•˜ê³  ë°°í¬í•˜ê¸° on reddit" href="https://reddit.com/submit?url=http%3a%2f%2fjeha00.github.io%2fpost%2fdocker%2f04_deployment-by-docker%2f&title=Docker%20study%3a%20Docker-compose%eb%a1%9c%20nginx%2c%20django%2c%20postgreSQL%ec%9d%84%20%ec%97%b0%ea%b2%b0%ed%95%98%ea%b3%a0%20%eb%b0%b0%ed%8f%ac%ed%95%98%ea%b8%b0"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Docker study: Docker-composeë¡œ nginx, django, postgreSQLì„ ì—°ê²°í•˜ê³  ë°°í¬í•˜ê¸° on facebook" href="https://facebook.com/sharer/sharer.php?u=http%3a%2f%2fjeha00.github.io%2fpost%2fdocker%2f04_deployment-by-docker%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Docker study: Docker-composeë¡œ nginx, django, postgreSQLì„ ì—°ê²°í•˜ê³  ë°°í¬í•˜ê¸° on whatsapp" href="https://api.whatsapp.com/send?text=Docker%20study%3a%20Docker-compose%eb%a1%9c%20nginx%2c%20django%2c%20postgreSQL%ec%9d%84%20%ec%97%b0%ea%b2%b0%ed%95%98%ea%b3%a0%20%eb%b0%b0%ed%8f%ac%ed%95%98%ea%b8%b0%20-%20http%3a%2f%2fjeha00.github.io%2fpost%2fdocker%2f04_deployment-by-docker%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Docker study: Docker-composeë¡œ nginx, django, postgreSQLì„ ì—°ê²°í•˜ê³  ë°°í¬í•˜ê¸° on telegram" href="https://telegram.me/share/url?text=Docker%20study%3a%20Docker-compose%eb%a1%9c%20nginx%2c%20django%2c%20postgreSQL%ec%9d%84%20%ec%97%b0%ea%b2%b0%ed%95%98%ea%b3%a0%20%eb%b0%b0%ed%8f%ac%ed%95%98%ea%b8%b0&url=http%3a%2f%2fjeha00.github.io%2fpost%2fdocker%2f04_deployment-by-docker%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer><script src=https://utteranc.es/client.js repo=JeHa00/blog-comments issue-term=pathname theme=github-dark crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2022 <a href=http://jeha00.github.io/>Jeha00 DevLog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>